<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head th:include="fragments/common :: headTag">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <!--/*-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <link href="https://www.fuelcdn.com/fuelux/3.6.3/css/fuelux.min.css" rel="stylesheet">
    <link href="../../../../static/css/common.css" rel="stylesheet">
    <script data-main="../../../../static/js/requireConfig"
            src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.16/require.min.js"></script>
    <!--*/-->
</head>
<body class="fuelux ng-cloak" style="overflow-x: hidden;">
<div th:include="fragments/common :: bodyHeader" th:remove="tag"/>
<script th:inline="javascript">
    /*<![CDATA[*/
    var isNumeric = function (evt) {

        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if (charCode == 13) {
            evt.preventDefault();
        }


        if (charCode > 31 && charCode != 8 && charCode != 0 && (charCode < 48 || charCode > 57 ))
            return false;
        return true;
    }
    /*]]>*/

</script>
<script>
    var isEnterKey = function (event) {
        var charCode = (event.which) ? event.which : event.keyCode;

        if (charCode == 13) {
            event.preventDefault();
        }
    }
    requirejs(['main','angular-file-upload'], function () {
        require(['/pla/js/individuallife/endorsement/createEndorsement.js?t=11221'], function () {
            angular.bootstrap(document, ['createEndorsement']);
        });
    });

</script><script id="plan-sumassured.tpl" type="text/ng-template">
    <div ng-switch="plan.sumAssured.sumAssuredType" ng-form="planSumAssured">
        <div ng-switch-when="SPECIFIED_VALUES">
            <select class="form-control input-sm" ng-model="ilEndrosementDetils.proposalPlanDetailNew.sumAssured" name="sumAssured"
                    ng-options="value.text as value.text for value in plan.sumAssured.sumAssuredValue"
                    view-enabled="" ng-required="true"></select>
        </div>
        <div ng-switch-when="RANGE">
            <input type="number" view-enabled="" class="form-control input-sm" min="{{plan.sumAssured.minSumInsured}}"
                   name="plansumAssured" validate-sumassured=""
                   max="{{plan.sumAssured.maxSumInsured}}" ng-model="ilEndrosementDetils.proposalPlanDetailNew.sumAssured" ng-required="true"/>
            <div class="error" ng-messages="planSumAssured.plansumAssured.$error">
                <small ng-message="min">Sum Assured cannot be less then {{plan.sumAssured.minSumInsured}}.</small>
                <small ng-message="max">Sum Assured cannot be more than {{plan.sumAssured.maxSumInsured}}.</small>
                <small ng-message="invalidMultiple">Please enter multiples of {{plan.sumAssured.multiplesOf}}</small>
            </div>
        </div>
        <div ng-switch-when="INCOME_MULTIPLIER">
            <input type="number" view-enabled="" class="form-control input-sm" min="0"
                   max="{{plan.sumAssured.incomeMultiplier}}"
                   name="sumAssured"
                   ng-model="ilEndrosementDetils.proposalPlanDetailNew.sumAssured" ng-required="true"/>

            <div class="error" ng-messages="planSumAssured.sumAssured.$error" ng-if="planSumAssured.$dirty">
                <small ng-message="max">Sum Assured cannot be greater than {{plan.sumAssured.incomeMultiplier}}.
                </small>
            </div>
        </div>
    </div>
</script>

<script type="text/ng-template" id="createEndorsementTpl.html">


    <p class="container lead">
    <ol class="container breadcrumb" style="margin-left: 12px;width:99%">
        <li>Endorsement</li>
        <li>Individual Life</li>
    </ol>
    </p>

    <nth-alert></nth-alert>
    <form name="endorsementForm" novalidate="true" class="css-form ng-cloak" method="post" enctype="multipart/form-data">
        <div class="wizard fueluxWizard" style="overflow: visible" selected-item="selectedItem">

            <div class="alert alert-danger" role="alert" ng-show="serverError">
                <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                <span class="sr-only">Error:</span>
                {{serverErrMsg}}
            </div>

            <ul class="steps" style="margin-left: 0">
                <li data-step="1"><span class="badge badge-info">1</span>Endorsement Request<span class="chevron"></span>
                </li>
                <li data-step="2"><span class="badge">2</span>Document Details<span class="chevron"></span>
                </li>
            </ul>
            <div class="actions">
                 <span style="font-weight: bolder;margin-right: 15px;color: #999">Endorsement Request Number: <span
                         style="font-size: 13px;color: #3a87ad;">{{endorsementRequestNumber}}</span></span>

                <button type="button" class="btn btn-default btn-prev" disabled="disabled"><span
                        class="glyphicon glyphicon-arrow-left"></span>Prev
                </button>
                <button type="button" class="btn btn-default btn-next" >Next<span
                        class="glyphicon glyphicon-arrow-right"></span></button>
                <!-- -->
            </div>
            <div class="step-content ng-cloak">
                <div class="step-pane active" data-step="1">
                    <ng-form name="step1">
                        <div class="row bs-callout  bs-callout-info" style="margin: 5px;padding:10px">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Policy Number</label>
                                    <div class='input-group'>
                                        <input type="text" ng-blur="searchPolicyNumber()" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'||endorsementRequestNumber" name="otherName" ng-maxlength="20" ng-model="policy.policyNumber"/>
                                           <span class="input-group-btn">
                                                <button type="button" class="btn btn-default btn-sm" ng-click="searchPolicyNumber()" ng-disabled="mode=='new'||mode=='view'||endorsementRequestNumber">
                                                    <i class="glyphicon glyphicon-search"></i>
                                                </button>
                                           </span>
                                    </div>
                                </div>
                                <div class="form-group required">
                                    <label class="control-label">Endrosement Type</label>
                                    <select class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'||endorsementRequestNumber" name="endrosementType" ng-model="policy.endrosementType" ng-required="true" ng-change="clearData()">
                                        <option value="">--- Select Endrosement Type -- </option>
                                        <option value="ASSURED_NAME_CHANGE">Correction of Name- Life Assured</option>
                                        <option value="POLICYHOLDER_NAME_CHANGE">Correction of Name- Policyholder</option>
                                        <option value="POLICYHOLDER_GENDER_CHANGE">Correction of Gender- Policyholder</option>
                                        <option value="ASSURED_GENDER_CHANGE">Correction of Gender- Life Assured</option>
                                        <option value="ASSURED_DOB_CHANGE">Correction of DoB- Life Assured</option>
                                        <option value="POLICYHOLDER_DOB_CHANGE">Correction of DoB- Policy Holder</option>
                                        <option value="POLICYHOLDER_NRC_CHANGE">Correction of NRC- Policy Holder</option>
                                        <option value="ASSURED_NRC_CHANGE">Correction of NRC- Life Assured</option>
                                        <option value="ASSURED_CONTACT_DETAILS_CHANGE">Change of Contact Details- Life Assured</option>
                                        <option value="POLICYHOLDER_CONTACT_DETAILS_CHANGE">Change of Contact Details- Policyholder</option>
                                        <option value="changeSumAssured">Change in Sum Assured</option>
                                        <option value="BENEFICIARY_DETAILS_CHANGE">Add/Change/Delete Beneficiary</option>
                                        <option value="AGENT_DETAILS_CHANGE">Add/Change/Delete Agent</option>
                                        <option value="PAYMENT_MODE_CHANGE">Change Payment Mode</option>
                                        <option value="premiumAdjustment">Premium Adjustment</option>
                                    </select>

                                    <div class="error" ng-messages="step1.endrosementType.$error" ng-if="step1.endrosementType.$dirty">
                                        <small ng-message="required">Please select Endrosement Type</small>
                                    </div>

                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Policy Holder Name</label>
                                    <input type="text" class="form-control input-sm" readonly="true" name="firstName" ng-pattern="/^[a-zA-Z ]*$/" ng-maxlength="20" ng-model="policy.policyHolderName"/>
                                </div>
                                <div class="form-group">
                                    <label class="control-label">Endrosement Effective Date</label>
                                    <div class='input-group date'>
                                        <input type="text" class="form-control input-sm"
                                               ng-click="updateEffectiveDate($event)" max-date="todayDate" datepicker-popup="dd/MM/yyyy"
                                               ng-model="ilEndrosementDetils.effectiveDate"
                                               datepicker-options="datePickerSettingsForUpdateEffectiveDate.dateOptions"
                                               is-open="datePickerSettingsForUpdateEffectiveDate.isOpened" close-text="Close"
                                               show-button-bar="false"
                                               name="effectiveUpdateDate" ng-required="true"
                                               onkeypress="return isNumeric(event)"
                                               ng-disabled="mode=='new'||mode=='view'" />
                                                <span class="input-group-btn">
                                                    <button ng-disabled="mode=='new'||mode=='view'" type="button" class="btn btn-default btn-sm"
                                                            ng-click="updateEffectiveDate($event)">
                                                        <i class="glyphicon glyphicon-calendar"></i>
                                                    </button>
                                                </span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <strong ng-if="policy.endrosementType =='ASSURED_NAME_CHANGE'">Life Assured Name Details</strong>
                        <div class="row bs-callout  bs-callout-info" style="margin: 5px;padding:10px" ng-if="policy.endrosementType =='ASSURED_NAME_CHANGE'">
                            <div class="col-md-6">
                                <div class="form-group required">
                                    <label class="control-label">Title</label>
                                    <select class="form-control input-sm" name="title" ng-required="true" ng-disabled="mode=='new'||mode=='view'" ng-model="ilEndrosementDetils.lifeAssuredNew.title" ng-options="title as title for title in titleList">
                                    </select>

                                    <div class="error" ng-messages="step1.title.$error" ng-if="step1.title.$dirty">
                                        <small ng-message="required">Please enter Title</small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label">Life Assured Surname</label>
                                    <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="surName" ng-maxlength="20" ng-pattern="/^[a-zA-Z ]*$/" ng-model="ilEndrosementDetils.lifeAssuredNew.surname"/>

                                    <div class="error" ng-messages="step1.surName.$error" ng-if="step1.surName.$dirty">
                                        <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                        <small ng-message="pattern">Only alphabets are allowed.</small>
                                    </div>

                                </div>

                            </div>
                            <div class="col-md-6">
                                <div class="form-group required">
                                    <label class="control-label">Life Assured First Name</label>
                                    <input type="text" class="form-control input-sm" ng-required="true" name="firstName" ng-pattern="/^[a-zA-Z ]*$/" ng-maxlength="20" ng-model="ilEndrosementDetils.lifeAssuredNew.firstName"/>
                                    <div class="error" ng-messages="step1.firstName.$error" ng-if="step1.firstName.$dirty">
                                        <small class="error" ng-message="required">
                                            Please enter FirstName
                                        </small>
                                        <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                        <small ng-message="pattern">Only alphabets are allowed.</small>
                                    </div>

                                </div>

                                <div class="form-group">
                                    <label class="control-label">Other Name</label>
                                    <input type="text" class="form-control input-sm" name="otherName" ng-pattern="/^[a-zA-Z ]*$/" ng-maxlength="20" ng-model="ilEndrosementDetils.lifeAssuredNew.otherName"/>

                                    <div class="error" ng-messages="step1.otherName.$error" ng-if="step1.otherName.$dirty">
                                        <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                        <small ng-message="pattern">Only alphabets are allowed.</small>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <strong ng-if="policy.endrosementType == 'POLICYHOLDER_NAME_CHANGE'">Policy Holder Name Details</strong>
                        <div class="row bs-callout  bs-callout-info" style="margin: 5px;padding:10px" ng-if="policy.endrosementType =='POLICYHOLDER_NAME_CHANGE'">
                            <div class="col-md-6">
                                <div class="form-group required">
                                    <label class="control-label">Title</label>
                                    <select class="form-control input-sm" name="title" ng-required="true" ng-disabled="mode=='new'||mode=='view'" ng-model="ilEndrosementDetils.policyHolderNew.title" ng-options="title as title for title in titleList">
                                    </select>
                                    <div class="error" ng-messages="step1.title.$error" ng-if="step1.title.$dirty">
                                        <small ng-message="required">Please enter Title</small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label">Policy Holder Surname</label>
                                    <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="policyHolderSurName" ng-maxlength="20" ng-pattern="/^[a-zA-Z ]*$/" ng-model="ilEndrosementDetils.policyHolderNew.surname"/>

                                    <div class="error" ng-messages="step1.policyHolderSurName.$error" ng-if="step1.policyHolderSurName.$dirty">
                                        <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                        <small ng-message="pattern">Only alphabets are allowed.</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group required">
                                    <label class="control-label">Policy Holder First Name</label>
                                    <input type="text" class="form-control input-sm" ng-required="true" name="policyHolderFirstName" ng-pattern="/^[a-zA-Z ]*$/" ng-maxlength="20" ng-model="ilEndrosementDetils.policyHolderNew.firstName"/>

                                    <div class="error" ng-messages="step1.policyHolderFirstName.$error" ng-if="step1.policyHolderFirstName.$dirty">
                                        <small class="error" ng-message="required">
                                            Please enter FirstName
                                        </small>
                                        <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                        <small ng-message="pattern">Only alphabets are allowed.</small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label">Other Name</label>
                                    <input type="text" class="form-control input-sm" name="policyHolderOtherName" ng-pattern="/^[a-zA-Z ]*$/" ng-maxlength="20" ng-model="ilEndrosementDetils.policyHolderNew.otherName"/>

                                    <div class="error" ng-messages="step1.policyHolderOtherName.$error" ng-if="step1.policyHolderOtherName.$dirty">
                                        <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                        <small ng-message="pattern">Only alphabets are allowed.</small>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <strong ng-if="policy.endrosementType == 'POLICYHOLDER_GENDER_CHANGE'">Policy Holder Gender Details</strong>
                        <div class="row bs-callout  bs-callout-info" style="margin: 5px;padding:10px" ng-if="policy.endrosementType =='POLICYHOLDER_GENDER_CHANGE'">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Policy Holder Gender</label>
                                    <select class="form-control input-sm" readonly="true" name="gender" ng-model="ilEndrosementDetils.policyHolder.gender" ng-init="changePolicyHolderGender()" ng-change="changePolicyHolderGender()">
                                        <option value="">Select Gender</option>
                                        <option value="MALE">Male</option>
                                        <option value="FEMALE">Female</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Policy Holder Gender - New</label>
                                    <select class="form-control input-sm" readonly="true" name="newGender" ng-model="ilEndrosementDetils.policyHolderNew.gender" ng-change="changePolicyHolderGender()">
                                        <option value="">Select Gender</option>
                                        <option value="MALE">Male</option>
                                        <option value="FEMALE">Female</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <strong ng-if="policy.endrosementType == 'ASSURED_GENDER_CHANGE'">Life Assured Gender Details</strong>
                        <div class="row bs-callout  bs-callout-info" style="margin: 5px;padding:10px" ng-if="policy.endrosementType =='ASSURED_GENDER_CHANGE'">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Life Assured Gender</label>
                                    <select class="form-control input-sm" readonly="true" name="gender" ng-model="ilEndrosementDetils.lifeAssured.gender" ng-init="changeLifeAssuredGender()" ng-change="changeLifeAssuredGender()">
                                        <option value="">Select Gender</option>
                                        <option value="MALE">Male</option>
                                        <option value="FEMALE">Female</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="control-label">Old Premium</label>
                                    <input type="text" class="form-control input-sm" readonly="true" name="oldPremium" ng-model="policy.oldPremium"/>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Life Assured Gender - New</label>
                                    <select class="form-control input-sm" readonly="true" name="gender" ng-model="ilEndrosementDetils.lifeAssuredNew.gender">
                                        <option value="">Select Gender</option>
                                        <option value="MALE">Male</option>
                                        <option value="FEMALE">Female</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="control-label">New Premium</label>
                                    <input type="text" class="form-control input-sm" readonly="true" name="firstName" ng-model="policy.newPremium"/>
                                </div>
                            </div>
                        </div>

                        <accordion ng-if="policy.endrosementType == 'ASSURED_DOB_CHANGE'">
                            <accordion-group is-open="true">
                                <accordion-heading>
                                    Life Assured DOB Details <i class="pull-right glyphicon"
                                                                ng-class="{'glyphicon-chevron-down': accordionStatus.proposerDetails.employment, 'glyphicon-chevron-right': !accordionStatus.proposerDetails.employment}"></i>
                                </accordion-heading>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label">Life Assured DoB</label>
                                        <div class='input-group date'>
                                            <input type="text" class="form-control input-sm"
                                                   datepicker-popup="" view-enabled=""
                                                   is-open="launchdob"
                                                   readonly="true" max-date="todayDate" ng-disabled="mode=='new'||mode=='view'"
                                                   ng-model="ilEndrosementDetils.lifeAssured.dateOfBirth" name="lifeAssuredDob"
                                                    ng-change="earlierAgeCalculation()"/>
                                                    <span class="input-group-btn">
                                                            <button ng-disabled="true" type="button" class="btn btn-default btn-sm"
                                                                    ng-click="LADOB($event)">
                                                                <i class="glyphicon glyphicon-calendar"></i>
                                                            </button>
                                                  </span>
                                        </div>

                                        <!--<div class="error" ng-messages="step1.lifeAssuredDob.$error" ng-if="step1.lifeAssuredDob.$dirty">
                                            <small ng-message="required">Please enter Date of Birth.</small>
                                            <small ng-message="date">Invalid Date.</small>
                                        </div>-->
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label">Earlier Age</label>
                                        <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" ng-readonly="true" name="earlierAge" ng-model="ilEndrosementDetils.lifeAssured.earlierAge"/>
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label">Old Premium</label>
                                        <input type="text" class="form-control input-sm" readonly="true" name="oldPremium" ng-model="policy.oldPremium"/>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group required">
                                        <label class="control-label">Updated Life Assured DoB</label>
                                        <div class='input-group date'>
                                            <input type="text" class="form-control input-sm"
                                                   ng-click="updateLADOB($event)" max-date="todayDate" datepicker-popup="dd/MM/yyyy"
                                                   ng-model="ilEndrosementDetils.lifeAssuredNew.dateOfBirth"
                                                   datepicker-options="datePickerSettingsForUpdateLifeAssuredDOB.dateOptions"
                                                   is-open="datePickerSettingsForUpdateLifeAssuredDOB.isOpened" close-text="Close"
                                                   show-button-bar="false"
                                                   name="lifeAssuredDob" ng-required="true"
                                                   onkeypress="return isNumeric(event)"
                                                   validate-date="" validate-update-dob="" />

                                                <span class="input-group-btn">
                                                    <button ng-disabled="mode=='new'||mode=='view'" type="button" class="btn btn-default btn-sm"
                                                            ng-click="updateLADOB($event)">
                                                        <i class="glyphicon glyphicon-calendar"></i></button>
                                              </span>
                                        </div>
                                        <div class="error" ng-messages="step1.lifeAssuredDob.$error" ng-if="step1.lifeAssuredDob.$dirty">
                                           <small ng-message="required">Please enter Date of Birth.</small>
                                           <small ng-message="date">Invalid Date.</small>
                                            <small ng-message="dateDuplicate">Both Life Assured DoB And Updated Life Assured DoB Should Not Same</small>
                                            <small ng-message="invalidMinAge">Minimum Entry Age For Updated Life Assured DoB
                                                is
                                                {{plan.planDetail.minEntryAge}} years.
                                            </small>
                                            <small ng-message="invalidMaxAge">Maximum Entry Age For Updated Life Assured DoB
                                                is
                                                {{plan.planDetail.maxEntryAge}} Years.
                                            </small>
                                       </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Corrected Age</label>
                                        <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" readonly="true" name="correctedAge" ng-model="ilEndrosementDetils.lifeAssured.correctedAge"/>
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label">New Premium</label>
                                        <input type="text" class="form-control input-sm" readonly="true" name="firstName" ng-model="policy.newPremium"/>
                                    </div>
                                </div>
                            </accordion-group>
                        </accordion>

                        <accordion ng-if="policy.endrosementType== 'POLICYHOLDER_DOB_CHANGE'">
                            <accordion-group is-open="true">
                                <accordion-heading>
                                    Policy Holder DOB Details <i class="pull-right glyphicon"
                                                                 ng-class="{'glyphicon-chevron-down': accordionStatus.proposerDetails.employment, 'glyphicon-chevron-right': !accordionStatus.proposerDetails.employment}"></i>
                                </accordion-heading>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label">Policy Holder DoB</label>
                                        <!--<input type="text" class="form-control input-sm" name="dob" ng-model="proposer.dateOfBirth" ng-required="true"/>-->
                                        <div class='input-group date'>
                                            <input type="text" class="form-control input-sm"
                                                   datepicker-popup="" view-enabled=""
                                                   is-open="launchdob"
                                                   readonly="true"
                                                   max-date="todayDate" ng-disabled="mode=='new'||mode=='view'"
                                                   ng-model="ilEndrosementDetils.policyHolder.dateOfBirth" name="dob"
                                                   ng-change="earlierAgeCalculationForPolicyHolder()" />
                                                    <span class="input-group-btn">
                                                            <button ng-disabled="true" type="button" class="btn btn-default btn-sm"
                                                                    ng-click="LADOB($event)">
                                                                <i class="glyphicon glyphicon-calendar"></i>
                                                            </button>
                                                  </span>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label">Earlier Age</label>
                                        <input type="text" class="form-control input-sm" readonly="true" ng-disabled="mode=='new'||mode=='view'" name="earlierAge" ng-model="ilEndrosementDetils.policyHolder.earlierAge"/>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group required">
                                        <label class="control-label">Updated Policy Holder DoB</label>
                                        <!--<input type="text" class="form-control input-sm" name="dob" ng-model="proposer.dateOfBirth" ng-required="true"/>-->
                                        <div class='input-group date'>
                                            <input type="text" class="form-control input-sm"
                                                   ng-click="updatePHDOB($event)" max-date="todayDate" datepicker-popup="dd/MM/yyyy"
                                                   ng-model="ilEndrosementDetils.policyHolderNew.dateOfBirth"
                                                   datepicker-options="datePickerSettingsForUpdatePolicyHolderDOB.dateOptions"
                                                   is-open="datePickerSettingsForUpdatePolicyHolderDOB.isOpened" close-text="Close"
                                                   show-button-bar="false"
                                                   name="policyHolderDobUpdate" ng-required="true"
                                                   onkeypress="return isNumeric(event)"
                                                   validate-update-dob="" validate-date="" />
                                            <span class="input-group-btn">
                                                <button ng-disabled="mode=='new'||mode=='view'" type="button" class="btn btn-default btn-sm"
                                                        ng-click="updatePHDOB($event)">
                                                    <i class="glyphicon glyphicon-calendar"></i></button>
                                            </span>
                                        </div>

                                        <div class="error" ng-messages="step1.policyHolderDobUpdate.$error" ng-if="step1.policyHolderDobUpdate.$dirty">
                                            <small ng-message="required">Please enter Date of Birth.</small>
                                            <small ng-message="date">Invalid Date.</small>
                                            <small ng-message="dateDuplicate">Both Policy Holder DoB And Updated Policy Holder DoB Should Not Same</small>
                                            <small ng-message="invalidMinAge">Minimum Entry Age For Updated Policy Holder DoB
                                                is
                                                {{plan.planDetail.minEntryAge}} years.
                                            </small>
                                            <small ng-message="invalidMaxAge">Maximum Entry Age For Updated Policy Holder DoB
                                                is
                                                {{plan.planDetail.maxEntryAge}} Years.
                                            </small>
                                            <small ng-message="invalidUpdateMinAge">Minimum Entry Age For Proposer is 18 years.
                                            </small>
                                            <small ng-message="invalidUpdateMaxAge">Maximum Entry Age For Proposer is 60 Years.
                                            </small>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Corrected Age</label>
                                        <input type="text" class="form-control input-sm" readonly="true" ng-disabled="mode=='new'||mode=='view'" name="correctedAge"
                                               ng-model="ilEndrosementDetils.policyHolderNew.correctedAge"/>
                                    </div>
                                </div>
                            </accordion-group>
                        </accordion>

                        <strong ng-if="policy.endrosementType =='POLICYHOLDER_NRC_CHANGE'">Policy Holder NRC Details</strong>
                        <div class="row bs-callout  bs-callout-info" style="margin: 5px;padding:10px" ng-if="policy.endrosementType =='POLICYHOLDER_NRC_CHANGE'">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Policyholder NRC</label>
                                    <input type="text" class="form-control input-sm" name="nrc" readonly="true" ng-disabled="mode=='new'||mode=='view'" ng-model="ilEndrosementDetils.policyHolder.nrc" ng-maxlength="11" ng-pattern="/^[0-9]{6}\/[0-9]{2}\/[0-9]{1}$/"/>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Policyholder NRC-New</label>
                                    <input type="text" class="form-control input-sm" name="nrcNew" ng-disabled="mode=='new'||mode=='view'" validate-Nrc=""
                                           ng-model="ilEndrosementDetils.policyHolderNew.nrc" ng-maxlength="11" ng-pattern="/^[0-9]{6}\/[0-9]{2}\/[0-9]{1}$/"/>

                                    <div class="error" ng-messages="step1.nrcNew.$error" ng-if="step1.nrcNew.$dirty">
                                        <small ng-message="maxlength">Only 11 characters are allowed.</small>
                                        <small ng-message="pattern"> Follow Pattern 999999/99/1</small>
                                        <small ng-message="duplicateNRC">Policyholder NRC And Policyholder NRC-New Should Not Same.</small>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <strong ng-if="policy.endrosementType =='ASSURED_NRC_CHANGE'">Life Assured NRC Details</strong>
                        <div class="row bs-callout  bs-callout-info" style="margin: 5px;padding:10px" ng-if="policy.endrosementType =='ASSURED_NRC_CHANGE'">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Life Assured NRC</label>
                                    <input type="text" class="form-control input-sm" name="nrcLA" readonly="true" ng-disabled="true" ng-model="ilEndrosementDetils.lifeAssured.nrc" ng-maxlength="11" ng-pattern="/^[0-9]{6}\/[0-9]{2}\/[0-9]{1}$/"/>

                                    <div class="error" ng-messages="step1.nrcLA.$error" ng-if="step1.nrcLA.$dirty">
                                        <small ng-message="maxlength">Only 11 characters are allowed.</small>
                                        <small ng-message="pattern"> Follow Pattern 999999/99/1</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group required">
                                    <label class="control-label">Life Assured NRC-New</label>
                                    <input type="text" class="form-control input-sm" name="nrcLANew" validate-Nrc="" ng-required="true" ng-disabled="mode=='new'||mode=='view'" ng-model="ilEndrosementDetils.lifeAssuredNew.nrc" ng-maxlength="11" ng-pattern="/^[0-9]{6}\/[0-9]{2}\/[0-9]{1}$/"/>

                                    <div class="error" ng-messages="step1.nrcLANew.$error" ng-if="step1.nrcLANew.$dirty">
                                        <small class="error" ng-message="required">Please enter NRC.</small>
                                        <small ng-message="maxlength">Only 11 characters are allowed.</small>
                                        <small ng-message="pattern"> Follow Pattern 999999/99/1</small>
                                        <small ng-message="duplicateNRC">Life Assured And Life Assured NRC-New Should Not Same.</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <accordion ng-if="policy.endrosementType== 'ASSURED_CONTACT_DETAILS_CHANGE'">
                            <accordion-group is-open="true">
                                <accordion-heading>
                                    Life Assured Contact Details <i class="pull-right glyphicon"
                                                                    ng-class="{'glyphicon-chevron-down': accordionStatus.proposerDetails.employment, 'glyphicon-chevron-right': !accordionStatus.proposerDetails.employment}"></i>
                                </accordion-heading>
                                <div class="row bs-callout  bs-callout-info" style="margin: 5px;padding:10px">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">Mobile Number</label>
                                            <input type="text" class="form-control input-sm" ng-minlength="10" ng-disabled="mode=='new'||mode=='view'" maxlength="10" ng-maxLength="10" name="mobileNumberLAChange" ng-pattern="/^\d+$/" ng-model="ilEndrosementDetils.lifeAssuredNew.mobileNumber"/>

                                            <div class="error" ng-messages="step1.mobileNumberLAChange.$error" ng-if="step1.mobileNumberLAChange.$dirty">
                                                <small ng-message="pattern">Please enter a valid mobile number.</small>
                                                <small ng-message="maxlength">Only 10 number are allowed.</small>
                                                <small ng-message="minlength">Minimum 10 number are allowed.</small>
                                            </div>

                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">Home Phone</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="residentPhone" ng-maxlength="10" maxlength="10" ng-pattern="/^\d+$/" ng-model="ilEndrosementDetils.lifeAssuredNew.residentialAddress.homePhone"/>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">Work phone</label>
                                            <input type="text" class="form-control input-sm" name="workPhone" ng-disabled="mode=='new'||mode=='view'" ng-minlength="10" maxlength="10" ng-maxlength="10" ng-pattern="/^\d+$/" ng-model="ilEndrosementDetils.lifeAssuredNew.employmentDetail.workPhone"/>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">EmailID</label>
                                            <input type="email" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="spouseEmailId" ng-model="ilEndrosementDetils.lifeAssuredNew.emailAddress"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="margin: 5px;padding:10px">
                                    <div class="col-md-6">
                                        <strong>Residential Address</strong>
                                        <br /><br />
                                        <div class="form-group">
                                            <label class="control-label">Address Line 1</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine1LAChangeRes" maxlength="100" ng-maxlength="100" ng-model="ilEndrosementDetils.lifeAssuredNew.residentialAddress.address.address1"/>

                                            <div class="error" ng-messages="step1.addressLine1LAChangeRes.$error" ng-if="step1.addressLine1LAChangeRes.$dirty">
                                                <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label">Address Line 2</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine2LAChangeRes" maxlength="100" ng-maxlength="100" ng-model="ilEndrosementDetils.lifeAssuredNew.residentialAddress.address.address2"/>
                                            <div class="error" ng-messages="step1.addressLine2LAChangeRes.$error" ng-if="step1.addressLine2LAChangeRes.$dirty">
                                                <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label">Postal Code</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="postalCodeLAChangeRes" ng-pattern="/^\d+$/" maxlength="7" ng-minlength="7" ng-maxlength="7" ng-model="ilEndrosementDetils.lifeAssuredNew.residentialAddress.address.postalCode"/>

                                            <div class="error" ng-messages="step1.postalCodeLAChangeRes.$error" ng-if="step1.postalCodeLAChangeRes.$dirty">
                                                <small ng-message="minlength">Atleast 7 characters are allowed.</small>
                                                <small ng-message="maxlength">Only 7 characters are allowed.</small>
                                                <small ng-message="pattern">Only Numeric are allowed.</small>
                                            </div>

                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Province</label>
                                            <select class="form-control input-sm" name="provinceLAChangeRes" ng-disabled="mode=='new'||mode=='view'" ng-options="province.provinceId as province.provinceName for province in provinces"
                                                    ng-model="ilEndrosementDetils.lifeAssuredNew.residentialAddress.address.province">
                                            </select>
                                            <div class="error" ng-messages="step1.provinceLAChangeRes.$error" ng-if="step1.provinceLAChangeRes.$dirty">
                                                <small class="error" ng-message="required">Please enter Province</small>
                                            </div>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Town</label>
                                            <select class="form-control input-sm" name="townLAChangeRes" ng-disabled="mode=='new'||mode=='view'" ng-model="ilEndrosementDetils.lifeAssuredNew.residentialAddress.address.town"
                                                    ng-options="city.geoId as city.geoName for city in townList">
                                                            <option value="">-- Select Town --</option>
                                                    </select>
                                            <div class="error" ng-messages="step1.townLAChangeRes.$error" ng-if="step1.townLAChangeRes.$dirty">
                                                <small class="error" ng-message="required">Please enter Town</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <strong>Employment Address</strong>
                                        <br /><br />
                                        <div class="form-group">
                                            <label class="control-label">Address Line 1</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine1LAChangeEmp" maxlength="100" ng-maxlength="100" ng-model="ilEndrosementDetils.lifeAssuredNew.employmentDetail.address.address1"/>

                                            <div class="error" ng-messages="step1.addressLine1LAChangeEmp.$error" ng-if="step1.addressLine1LAChangeEmp.$dirty">
                                                <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label">Address Line 2</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine2LAChangeEmp" maxlength="100" ng-maxlength="100" ng-model="ilEndrosementDetils.lifeAssuredNew.employmentDetail.address.address2"/>
                                            <div class="error" ng-messages="step1.addressLine2LAChangeEmp.$error" ng-if="step1.addressLine2LAChangeEmp.$dirty">
                                                <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label">Postal Code</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="postalCodeLAChangeEmp" ng-pattern="/^\d+$/" ng-minlength="7" ng-maxlength="7" ng-model="ilEndrosementDetils.lifeAssuredNew.employmentDetail.address.postalCode"/>

                                            <div class="error" ng-messages="step1.postalCodeLAChangeEmp.$error" ng-if="step1.postalCodeLAChangeEmp.$dirty">
                                                <small ng-message="minlength">Atleast 7 characters are allowed.</small>
                                                <small ng-message="maxlength">Only 7 characters are allowed.</small>
                                                <small ng-message="pattern">Only Numeric are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Province</label>
                                            <select class="form-control input-sm" name="provinceLAChangeEmp" ng-disabled="mode=='new'||mode=='view'" ng-options="province.provinceId as province.provinceName for province in provinces"
                                                    ng-model="ilEndrosementDetils.lifeAssuredNew.employmentDetail.address.province">
                                            </select>
                                            <div class="error" ng-messages="step1.provinceLAChangeEmp.$error" ng-if="step1.provinceLAChangeEmp.$dirty">
                                                <small class="error" ng-message="required">Please enter Province</small>
                                            </div>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Town</label>
                                            <select class="form-control input-sm" name="townLAChangeEmp" ng-disabled="mode=='new'||mode=='view'" ng-model="ilEndrosementDetils.lifeAssuredNew.employmentDetail.address.town"
                                                    ng-options="city.geoId as city.geoName for city in townListForLAEmp">
                                                     <option value="">-- Select Town --</option>
                                                    </select>

                                            <div class="error" ng-messages="step1.townLAChangeEmp.$error" ng-if="step1.townLAChangeEmp.$dirty">
                                                <small class="error" ng-message="required">Please enter Town</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </accordion-group>
                        </accordion>

                        <accordion ng-if="policy.endrosementType== 'POLICYHOLDER_CONTACT_DETAILS_CHANGE'">
                            <accordion-group is-open="true">
                                <accordion-heading>
                                    Policyholder Contact Details <i class="pull-right glyphicon"
                                                                    ng-class="{'glyphicon-chevron-down': accordionStatus.proposerDetails.employment, 'glyphicon-chevron-right': !accordionStatus.proposerDetails.employment}"></i>
                                </accordion-heading>
                                <div class="row bs-callout  bs-callout-info" style="margin: 5px;padding:10px">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">Mobile Number</label>
                                            <input type="text" class="form-control input-sm" ng-minlength="10" ng-disabled="mode=='new'||mode=='view'" maxlength="10" ng-maxLength="10" name="mobileNumberPHChange" ng-pattern="/^\d+$/" ng-model="ilEndrosementDetils.policyHolderNew.mobileNumber"/>

                                            <div class="error" ng-messages="step1.mobileNumberPHChange.$error" ng-if="step1.mobileNumberPHChange.$dirty">
                                                <small ng-message="pattern">Please enter a valid mobile number.</small>
                                                <small ng-message="maxlength">Only 10 number are allowed.</small>
                                                <small ng-message="minlength">Minimum 10 number are allowed.</small>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">Home Phone</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="residentPhone" ng-maxlength="10" maxlength="10" ng-pattern="/^\d+$/" ng-model="ilEndrosementDetils.policyHolderNew.residentialAddress.homePhone"/>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">Work phone</label>
                                            <input type="text" class="form-control input-sm" name="workPhone" ng-disabled="mode=='new'||mode=='view'" ng-minlength="10" maxlength="10" ng-maxlength="10" ng-pattern="/^\d+$/" ng-model="ilEndrosementDetils.policyHolderNew.employmentDetail.workPhone"/>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">EmailID</label>
                                            <input type="email" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="spouseEmailId" ng-model="ilEndrosementDetils.policyHolderNew.emailAddress"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="margin: 5px;padding:10px">
                                    <div class="col-md-6">
                                        <strong>Residential Address</strong>
                                        <br /><br />
                                        <div class="form-group">
                                            <label class="control-label">Address Line 1</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine1PHChangeRes" ng-maxlength="100" ng-model="ilEndrosementDetils.policyHolderNew.residentialAddress.address.address1"/>

                                            <div class="error" ng-messages="step1.addressLine1PHChangeRes.$error" ng-if="step1.addressLine1PHChangeRes.$dirty">
                                                <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label">Address Line 2</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine2PHChangeRes" ng-maxlength="100" ng-model="ilEndrosementDetils.policyHolderNew.residentialAddress.address.address2"/>
                                            <div class="error" ng-messages="step1.addressLine2PHChangeRes.$error" ng-if="step1.addressLine2PHChangeRes.$dirty">
                                                <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">Postal Code</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="postalCodePHChangeRes" ng-pattern="/^\d+$/" ng-minlength="7" maxlength="7" ng-maxlength="7" ng-model="ilEndrosementDetils.policyHolderNew.residentialAddress.address.postalCode"/>

                                            <div class="error" ng-messages="step1.postalCodePHChangeRes.$error" ng-if="step1.postalCodePHChangeRes.$dirty">
                                                <small ng-message="minlength">Atleast 7 characters are allowed.</small>
                                                <small ng-message="maxlength">Only 7 characters are allowed.</small>
                                                <small ng-message="pattern">Only Numeric are allowed.</small>
                                            </div>
                                        </div>
                                        <div class="form-group required">
                                            <label class="control-label">Province</label>
                                            <select class="form-control input-sm" name="provincePHChangeRes" ng-disabled="mode=='new'||mode=='view'" ng-options="province.provinceId as province.provinceName for province in provinces"
                                                    ng-model="ilEndrosementDetils.policyHolderNew.residentialAddress.address.province">

                                                <div class="error" ng-messages="step1.provincePHChangeRes.$error" ng-if="step1.provincePHChangeRes.$dirty">
                                                    <small class="error" ng-message="required">Please enter Province</small>
                                                </div>
                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label">Town</label>
                                            <select class="form-control input-sm" name="townPHChangeRes" ng-disabled="mode=='new'||mode=='view'" ng-model="ilEndrosementDetils.policyHolderNew.residentialAddress.address.town"
                                                    ng-options="city.geoId as city.geoName for city in townListForPHRes"/>

                                            <div class="error" ng-messages="step1.townPHChangeRes.$error" ng-if="step1.townPHChangeRes.$dirty">
                                                <small class="error" ng-message="required">Please enter Town</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <strong>Employment Address</strong>
                                        <br /><br />
                                        <div class="form-group">
                                            <label class="control-label">Address Line 1</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine1PHChangeEmp" ng-maxlength="100" ng-model="ilEndrosementDetils.policyHolderNew.employmentDetail.address.address1" />

                                            <div class="error" ng-messages="step1.addressLine1PHChangeEmp.$error" ng-if="step1.addressLine1PHChangeEmp.$dirty">
                                                <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label">Address Line 2</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine2PHChangeEmp" ng-maxlength="100" ng-model="ilEndrosementDetils.policyHolderNew.employmentDetail.address.address2"/>
                                            <div class="error" ng-messages="step1.addressLine2PHChangeEmp.$error" ng-if="step1.addressLine2PHChangeEmp.$dirty">
                                                <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label">Postal Code</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="postalCodePHChangeEmp" ng-pattern="/^\d+$/" ng-minlength="7" maxlength="7" ng-maxlength="7" ng-model="ilEndrosementDetils.policyHolderNew.employmentDetail.address.postalCode"/>

                                            <div class="error" ng-messages="step1.postalCodePHChangeEmp.$error" ng-if="step1.postalCodePHChangeEmp.$dirty">
                                                <small ng-message="minlength">Atleast 7 characters are allowed.</small>
                                                <small ng-message="maxlength">Only 7 characters are allowed.</small>
                                                <small ng-message="pattern">Only Numeric are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Province</label>
                                            <select class="form-control input-sm" name="provincePHChangeEmp" ng-disabled="mode=='new'||mode=='view'" ng-options="province.provinceId as province.provinceName for province in provinces"
                                                    ng-model="ilEndrosementDetils.policyHolderNew.employmentDetail.address.province">
                                            </select>
                                            <div class="error" ng-messages="step1.provincePHChangeEmp.$error" ng-if="step1.provincePHChangeEmp.$dirty">
                                                <small class="error" ng-message="required">Please enter Province</small>
                                            </div>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Town</label>
                                            <select class="form-control input-sm" name="townPHChangeEmp" ng-disabled="mode=='new'||mode=='view'" ng-model="ilEndrosementDetils.policyHolderNew.employmentDetail.address.town"
                                                    ng-options="city.geoId as city.geoName for city in townListForPHEmp"/>

                                            <div class="error" ng-messages="step1.townPHChangeEmp.$error" ng-if="step1.townPHChangeEmp.$dirty">
                                                <small class="error" ng-message="required">Please enter Town</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </accordion-group>
                        </accordion>

                        <accordion ng-if="policy.endrosementType== 'BENEFICIARY_DETAILS_CHANGE'">
                            <accordion-group is-open="true">
                                <accordion-heading>
                                    Beneficiary Details <i class="pull-right glyphicon"
                                                           ng-class="{'glyphicon-chevron-down': accordionStatus.planDetails.beneficiary, 'glyphicon-chevron-right': !accordionStatus.planDetails.beneficiary}"></i>
                                </accordion-heading>
                                <div class="row" style="margin: 0px">
                                    <div class="col-md-12">
                                        <p style="color:red" ng-show="commisionMessage">
                                            Sum of share % is not 100..Please update share % to ensure it should be 100
                                        </p>
                                        <button type="button" class="btn btn-default btn-xs pull-right"
                                                data-toggle="modal" data-target="#beneficialModal"
                                                ng-disabled="mode=='new'||mode=='view'" style="margin-bottom: 5px"><strong>Add Beneficiary</strong></button>
                                        <table class="table table-bordered">
                                            <thead>
                                            <tr>
                                                <th>
                                                    Beneficiary Name
                                                </th>
                                                <th>
                                                    Relationship To Proposed Assured
                                                </th>
                                                <th>
                                                    Share %
                                                </th>
                                                <th>Action</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="beneficiary in ilEndrosementDetils.beneficiariesNew">
                                                <td>{{beneficiary.firstName +' '+ beneficiary.surname}}</td>
                                                <td>{{beneficiary.relationshipId}}</td>
                                                <!--<td>{{beneficiary.share}}</td>-->
                                                <td>
                                                    <input type="number" ng-disabled="mode=='new'||mode=='view'" contenteditable="updateFlag" ng-change="shareSumTest()" min="0" ng-init="shareSumTest()" ng-model="beneficiary.share"  ng-blur="shareSumTest()" value="{{beneficiary.share}}" />
                                                </td>
                                                <td>
                                                <button type="button" class="btn btn-primary btn-sm" ng-disabled="mode=='new'||mode=='view'" data-toggle="modal" data-target="#beneficialModal" ng-click="updateBeneficiary($index)"><span class="glyphicon glyphicon-edit">&nbsp;Update</span></button>
                                                    <button type="button" class="btn btn-primary btn-sm" ng-disabled="mode=='new'||mode=='view'" ng-click="deleteBeneficiary($index)"><span class="glyphicon glyphicon-trash">&nbsp;Delete</span></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </accordion-group>
                        </accordion>

                        <accordion ng-if="policy.endrosementType== 'AGENT_DETAILS_CHANGE'">
                            <accordion-group is-open="true" ng-class="{'accordion-error':isAgentEmpty}">
                                <accordion-heading>
                                    Agent Details
                                    <i class="pull-right glyphicon"
                                       ng-class="{'glyphicon-chevron-down': accordionStatus.proposerDetails.agents, 'glyphicon-chevron-right': !accordionStatus.proposerDetails.agents}"></i>
                                </accordion-heading>
                                <div class="col-md-12">
                                    <p style="color:red" ng-show="agentMessage">
                                        Sum of commission % is not 100..Please update commission % to ensure it should be 100
                                    </p>
                                    <button ng-disabled="mode=='new'||mode=='view'" type="button" class="btn btn-default btn-xs pull-right"
                                            data-toggle="modal" data-target="#agentModal" style="margin-bottom: 5px"><strong>Add Agent</strong>
                                    </button>

                                    <table class="table table-bordered">
                                        <thead>
                                        <tr>
                                            <th>Agent Code</th>
                                            <th>Agent Name</th>
                                            <th>Commission %</th>
                                            <th>Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="row in ilEndrosementDetils.agentCommissionDetailsNew">
                                            <td>{{row.agentId}}</td>
                                            <td>{{row.firstName+ ' ' + (row.lastName !=null ?(row.lastName + ' ') : '')}}</td>

                                            <td>
                                                <input type="number" ng-disabled="mode=='new'||mode=='view'" contenteditable="updateFlag" ng-init="commisionSumTest()" ng-model="row.commission"  ng-change="commisionSumTest()" ng-blur="commisionSumTest()" value="{{row.commission}}" />
                                            </td>
                                            <td>
                                                <button type="button" class="btn btn-primary btn-sm" ng-click="deleteAgent(row.agentId)">Delete</button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </accordion-group>
                        </accordion>

                        <accordion ng-if="policy.endrosementType== 'PAYMENT_MODE_CHANGE'">
                            <accordion-group is-open="true" ng-if="policy.endrosementType== 'PAYMENT_MODE_CHANGE'">
                                <accordion-heading>
                                    Premium Payment Mode<i class="pull-right glyphicon"
                                                           ng-class="{'glyphicon-chevron-down': accordionStatus.proposerDetails.proposedAssured, 'glyphicon-chevron-right': !accordionStatus.proposerDetails.proposedAssured}"></i>
                                </accordion-heading>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label">Method Of Premium Payment</label>
                                        <select class="form-control input-sm" name="methodOfPremium" ng-disabled="mode=='new'||mode=='view'" ng-model="ilEndrosementDetils.premiumPaymentDetailsNew.premiumPaymentMethod">
                                            <option value="" >--- Select Premium Payment ---</option>
                                            <option value="CASH" >CASH</option>
                                            <option value="STOP_ORDER">Stop Order</option>
                                            <option value="DEBIT_ORDER">Bank Debit Order</option>
                                            <!--<option value="CHEQUE"> Cheque</option>-->
                                        </select>
                                        <div class="error" ng-messages="step1.methodOfPremium.$error" ng-if="step1.methodOfPremium.$dirty">
                                            <small class="error" ng-message="required">Please specify methodOfPremium</small>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-if="ilEndrosementDetils.premiumPaymentDetailsNew.premiumPaymentMethod == 'STOP_ORDER'">
                                        <label class="control-label">Employee No</label>
                                        <input type="text" class="form-control input-sm" ng-maxlength="15" name="employeeNumber" ng-model="ilEndrosementDetils.premiumPaymentDetailsNew.employerDetails.employeeId" ng-disabled="mode=='new'||mode=='view'"/>
                                        <div class="error" ng-messages="step1.employeeNumber.$error" ng-if="step1.employeeNumber.$dirty">
                                            <small ng-message="maxlength">Only 15 characters are allowed.</small>
                                        </div>

                                    </div>

                                    <div class="form-group required" ng-if="ilEndrosementDetils.premiumPaymentDetailsNew.premiumPaymentMethod == 'STOP_ORDER'">
                                        <label class="control-label">Company Name and Postal Address</label>
                                        <input type="text" class="form-control input-sm" ng-maxlength="100"  name="companyFullAddress1" ng-model="ilEndrosementDetils.premiumPaymentDetailsNew.employerDetails.companyNameAndPostalAddress" ng-disabled="mode=='new'||mode=='view'"/>

                                        <div class="error" ng-messages="step1.companyFullAddress1.$error" ng-if="step1.companyFullAddress1.$dirty">
                                            <!--<small class="error" ng-message="required">Please enter Spouse's First Name</small>-->
                                            <!--<small ng-message="pattern">Only alphabets are allowed.</small>-->
                                            <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                        </div>
                                    </div>
                                    <div class="form-group required" ng-if="ilEndrosementDetils.premiumPaymentDetailsNew.premiumPaymentMethod == 'STOP_ORDER'">
                                        <label class="control-label">Per</label>
                                        <!-- <input type="text" class="form-control input-sm" name="nrc" ng-model="premiumEmployerDetails.salaryPer" ng-disabled="mode=='new'||mode=='view'"/>-->
                                        <select class="form-control input-sm" name="salaryPer" ng-disabled="mode=='new'||mode=='view'" ng-model="ilEndrosementDetils.premiumPaymentDetailsNew.employerDetails.salaryPer">
                                            <option value=" "> -- Select Per -- </option>
                                            <option value="ANNUALLY">Annum</option>
                                            <option value="MONTHLY">Month</option>
                                            <option value="WEEKLY">Week</option>
                                        </select>

                                        <div class="error" ng-messages="step1.salaryPer.$error" ng-if="step1.salaryPer.$dirty">
                                            <small class="error" ng-message="required">Please specify whether salary is paid per week or Month or Year.</small>
                                        </div>
                                    </div>

                                    <div class="form-group required" ng-if="ilEndrosementDetils.premiumPaymentDetailsNew.premiumPaymentMethod == 'DEBIT_ORDER'">
                                        <label class="control-label">Bank Branch Sort Code</label>
                                        <input type="text" class="form-control input-sm" readonly="true" ng-model="ilEndrosementDetils.premiumPaymentDetailsNew.bankDetails.bankBranchSortCode" ng-disabled="mode=='new'||mode=='view'" name="spouseSurname"  ng-maxlength="20"
                                               ng-required="true" />
                                    </div>

                                    <div class="form-group required" ng-if="ilEndrosementDetils.premiumPaymentDetailsNew.premiumPaymentMethod == 'DEBIT_ORDER'">
                                        <label class="control-label">Bank Branch Name</label>
                                        <select class="form-control input-sm" name="branchname" ng-disabled="mode=='new'||mode=='view'" ng-options="bankBranchDetail.sortCode as bankBranchDetail.branchName for bankBranchDetail in bankBranchDetails"
                                                ng-model="ilEndrosementDetils.premiumPaymentDetailsNew.bankDetails.bankBranchName" ng-selected="bankBranchDetail.branchName" >
                                        </select>

                                        <div class="error" ng-messages="step1.branchname.$error" ng-if="step1.branchname.$dirty">
                                            <small class="error" ng-message="required">Please specify Bank Branch Name.</small>
                                        </div>
                                    </div>
                                    <div ng-if="ilEndrosementDetils.premiumPaymentDetailsNew.premiumPaymentMethod == 'DEBIT_ORDER'">
                                        <div class="form-group required" ng-if="ilEndrosementDetils.premiumPaymentDetailsNew.bankDetails.bankName =='INVESTRUST BANK PLC'">
                                            <label class="control-label">Bank Account Number</label>
                                            <input type="text" class="form-control input-sm" ng-model="ilEndrosementDetils.premiumPaymentDetailsNew.bankDetails.bankAccountNumber" ng-maxlength="17" ng-disabled="mode=='new'||mode=='view'" name="bankAccountNumber"/>

                                            <div class="error" ng-messages="step1.bankAccountNumber.$error" ng-if="step1.bankAccountNumber.$dirty">
                                                <small class="error" ng-message="required">Please specify Bank Branch Name.</small>
                                                <small class="error" ng-message="maxlength">Upto 17 Character Allow.</small>
                                            </div>
                                        </div>
                                        <div class="form-group required" ng-if="ilEndrosementDetils.premiumPaymentDetailsNew.bankDetails.bankName !='INVESTRUST BANK PLC'">
                                            <label class="control-label">Bank Account Number</label>
                                            <input type="text" class="form-control input-sm" ng-model="ilEndrosementDetils.premiumPaymentDetailsNew.bankDetails.bankAccountNumber" ng-maxlength="13" ng-disabled="mode=='new'||mode=='view'" name="bankAccountNumber"/>

                                            <div class="error" ng-messages="step1.bankAccountNumber.$error" ng-if="step1.bankAccountNumber.$dirty">
                                                <small class="error" ng-message="required">Please specify Bank Branch Name.</small>
                                                <small class="error" ng-message="maxlength">Upto 13 Character Allow.</small>
                                            </div>
                                        </div>
                                    </div>
                                    </div>
                                <div class="col-md-6">
                                    <div class="form-group" ng-if="ilEndrosementDetils.premiumPaymentDetailsNew.premiumPaymentMethod == 'STOP_ORDER'">
                                        <label class="control-label">Man No</label>
                                        <input type="text" class="form-control input-sm"  ng-model="ilEndrosementDetils.premiumPaymentDetailsNew.employerDetails.manNumber" ng-disabled="mode=='new' || mode=='view'" name="manNo"
                                               ng-maxlength="15"/>

                                        <div class="error" ng-messages="step1.manNo.$error" ng-if="step1.manNo.$dirty">
                                            <small class="error" ng-message="maxlength">Upto 15 Character allowed.</small>
                                        </div>

                                    </div>

                                    <div class="form-group required" ng-if="ilEndrosementDetils.premiumPaymentDetailsNew.premiumPaymentMethod == 'STOP_ORDER'">
                                        <label class="control-label">Basic Salary</label>
                                        <input type="number" class="form-control input-sm" name="basicSalary" ng-model="ilEndrosementDetils.premiumPaymentDetailsNew.employerDetails.basicSalary" min="0" max="9999999.99" ng-disabled="mode=='new'||mode=='view'"  />

                                        <div class="error" ng-messages="step1.basicSalary.$error" ng-if="step1.basicSalary.$dirty">
                                            <small class="error" ng-message="required">Please specify Basic Salary.</small>
                                            <small class="error" ng-message="max">Upto 9999999.99 allowed.</small>
                                        </div>

                                    </div>
                                    <div class="form-group" ng-if="ilEndrosementDetils.premiumPaymentDetailsNew.premiumPaymentMethod == 'DEBIT_ORDER'">
                                        <label class="control-label">Bank Name</label>
                                        <select class="form-control input-sm" name="bankName" ng-disabled="mode=='new'||mode=='view'" ng-options="bankDetail.bankName as bankDetail.bankName for bankDetail in bankDetailsResponse"
                                                ng-change="clearBankBranchName()" ng-model="ilEndrosementDetils.premiumPaymentDetailsNew.bankDetails.bankName">
                                        </select>
                                    </div>

                                    <div class="form-group required" ng-if="ilEndrosementDetils.premiumPaymentDetailsNew.premiumPaymentMethod == 'DEBIT_ORDER'">
                                        <label class="control-label">Bank Account Type</label>
                                        <select class="form-control input-sm" name="accountType" ng-model="ilEndrosementDetils.premiumPaymentDetailsNew.bankDetails.bankAccountType" ng-disabled="mode=='new'||mode=='view'" ng-required="true">
                                            <option  value="SAVING">Saving</option>
                                            <option  value="CURRENT">Current</option>
                                        </select>
                                        <div class="error" ng-messages="step1.accountType.$error" ng-if="step1.accountType.$dirty">
                                            <small class="error" ng-message="required">Please specify account type .</small>
                                        </div>
                                    </div>
                                </div>
                            </accordion-group>
                        </accordion>

                        <accordion ng-if="policy.endrosementType== 'changeSumAssured'">
                            <accordion-group ng-form="contactForm" is-open="true">
                                <accordion-heading>
                                    Change Sum Assured-Plan <i class="pull-right glyphicon"
                                                                    ng-class="{'glyphicon-chevron-down': accordionStatus.proposerDetails.employment, 'glyphicon-chevron-right': !accordionStatus.proposerDetails.employment}"></i>
                                </accordion-heading>
                                <div class="row bs-callout  bs-callout-info" style="margin: 5px;padding:10px">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">Plan</label>
                                            <input type="text" class="form-control input-sm" ng-minlength="10" ng-disabled="mode=='new'||mode=='view'" maxlength="10" readonly="true" ng-maxLength="10" name="mobileNumber" ng-pattern="/^\d+$/" ng-model="ilEndrosementDetils.proposalPlanDetailNew.planName"/>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">Ealier Sum Assured</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" readonly="true" name="residentPhone" ng-maxlength="10" maxlength="10" ng-pattern="/^\d+$/" ng-model="ilEndrosementDetils.proposalPlanDetail.sumAssured"/>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">New Sum Assured</label>
                                            <!--<input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="spouseEmailId" ng-model="ilEndrosementDetils.proposalPlanDetailNew.sumAssured"/>-->
                                            <sumassured ng-model="ilEndrosementDetils.proposalPlanDetailNew.sumAssured"></sumassured>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">Sum Assured To be Changed In</label>
                                            <button style="display: block;" type="button" class="btn btn-default btn-sm bs-select" data-all-none-buttons="true"
                                                    ng-model="plan.riderToChange"  data-multiple="1" ng-change="toggleSelection($event,plan.riderToChange)"
                                                    ng-options="riderDetail.coverageId as riderDetail.coverageName for riderDetail in ilEndrosementDetils.proposalPlanDetail.riderDetails" placeholder="Select one or more Riders">
                                                Action <span class="caret"></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div ng-repeat="rider in ilEndrosementDetils.proposalPlanDetailNew.riderDetails">
                                    <strong>Change Sum Assured- optional cover 1 </strong>
                                </div>
                                <strong>Change Sum Assured- optional cover 1 </strong>
                                <div class="row bs-callout  bs-callout-info" style="margin: 5px;padding:10px">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">Earlier Sum Assured</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="surName" ng-maxlength="20" ng-pattern="/^[a-zA-Z ]*$/" ng-model="policy.surName"/>
                                        </div>

                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">New Sum Assured</label>
                                            <input type="text" class="form-control input-sm" name="otherName" ng-pattern="/^[a-zA-Z ]*$/" ng-maxlength="20" ng-model="policy.otherName"/>
                                        </div>

                                    </div>
                                </div>

                                <strong>Change Sum Assured- optional cover 2 </strong>
                                <div class="row bs-callout  bs-callout-info" style="margin: 5px;padding:10px">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">Earlier Sum Assured</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="surName" ng-maxlength="20" ng-pattern="/^[a-zA-Z ]*$/" ng-model="policy.surName"/>
                                        </div>

                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">New Sum Assured</label>
                                            <input type="text" class="form-control input-sm" name="otherName" ng-pattern="/^[a-zA-Z ]*$/" ng-maxlength="20" ng-model="policy.otherName"/>
                                        </div>

                                    </div>
                                </div>
                                <br />
                                <div class="row bs-callout  bs-callout-info" style="margin: 5px;padding:10px">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">Old Premium</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="surName" ng-maxlength="20" ng-pattern="/^[a-zA-Z ]*$/" ng-model="policy.surName"/>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label">New Premium</label>
                                            <input type="text" class="form-control input-sm" name="otherName" ng-pattern="/^[a-zA-Z ]*$/" ng-maxlength="20" ng-model="policy.otherName"/>
                                        </div>

                                    </div>
                                </div>
                            </accordion-group>
                        </accordion>
                        <br />
                        <div class="row bs-callout  bs-callout-info" style="margin: 5px;padding:10px" ng-if="policy.endrosementType =='premiumAdjustment'">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">New Plan Premium</label>
                                    <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="surName" ng-maxlength="20" ng-pattern="/^[a-zA-Z ]*$/" ng-model="policy.surName"/>
                                </div>

                                <div class="form-group">
                                    <label class="control-label">New Optional Coverage 2 Premium</label>
                                    <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="surName" ng-maxlength="20" ng-pattern="/^[a-zA-Z ]*$/" ng-model="policy.surName"/>
                                </div>

                                <div class="form-group">
                                    <label class="control-label">New Plan Sum Assured</label>
                                    <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="surName" ng-maxlength="20" ng-pattern="/^[a-zA-Z ]*$/" ng-model="policy.surName"/>
                                </div>
                                <div class="form-group">
                                    <label class="control-label">New Optional Sum</label>
                                    <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="surName" ng-maxlength="20" ng-pattern="/^[a-zA-Z ]*$/" ng-model="policy.surName"/>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">New Optional Coverage 1 Premium</label>
                                    <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="surName" ng-maxlength="20" ng-pattern="/^[a-zA-Z ]*$/" ng-model="policy.surName"/>
                                </div>

                                <div class="form-group">
                                    <label class="control-label">New Optional Coverage 3 Premium</label>
                                    <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="surName" ng-maxlength="20" ng-pattern="/^[a-zA-Z ]*$/" ng-model="policy.surName"/>
                                </div>

                                <div class="form-group">
                                    <label class="control-label">New Optional Coverage 1 Sum Assured</label>
                                    <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="surName" ng-maxlength="20" ng-pattern="/^[a-zA-Z ]*$/" ng-model="policy.surName"/>
                                </div>
                                <div class="form-group">
                                    <label class="control-label">New Optional Coverage 3 Sum Assured</label>
                                    <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="surName" ng-maxlength="20" ng-pattern="/^[a-zA-Z ]*$/" ng-model="policy.surName"/>
                                </div>
                            </div>
                        </div>

                      <!--  <div class="modal fade" id="agentModal" tabindex="-1" role="dialog" aria-labelledby="agentModal" ng-form="agentForm">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h3 class="modal-title">Agent Details</h3>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group required">
                                                    <label class="control-label">Agent Code</label>
                                                    <div class="input-group">
                                                        <input type="text" onkeypress="return isEnterKey(event)" class="form-control input-sm" name="agentId"
                                                               ng-blur="searchAgent()" ng-model="newAgent.agentId" ng-required="true"
                                                               ng-disabled="mode=='new'">
                                                        </input>
                                                        <div class="input-group-btn">
                                                            <button type="button" class="btn btn-default btn-sm" ng-click="searchAgent()"
                                                                    ng-disabled="!newAgent.agentId || mode=='new'">
                                                                <span class="glyphicon glyphicon-search"></span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group required" ng-show="check">
                                                    <span style="color:red">Invalid Agent Code</span>
                                                </div>

                                                <div class="form-group required">
                                                    <label class="control-label">Commission %</label>
                                                    <input class="form-control input-sm" type="number" max="100" min="0" name="commission" ng-model="newAgent.commission"/>
                                                </div>
                                            </div>

                                            <div class="col-md-6">
                                                <div class="form-group required">
                                                    <label class="control-label">First Name</label>
                                                    <input type="text" class="form-control input-sm" name="firstName" readonly="true" ng-model="newAgent.firstName" />
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label">Last Name</label>
                                                    <input type="text" class="form-control input-sm" name="surname" readonly="true" ng-model="newAgent.lastName" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button class="btn btn-default" data-dismiss="modal" ng-disabled="agentForm.$invalid || checking" ng-click="addAgent(newAgent)">Add</button>
                                        <button class="btn btn-default" data-dismiss="modal" ng-click="cancel()">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>-->
                    </ng-form>

                     <div class="modal fade" id="beneficialModal" tabindex="-1" role="dialog" aria-labelledby="beneficialModal" ng-form="beneficiaryForm">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h3 class="modal-title">Beneficiary Details</h3>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group required">
                                                    <label class="control-label">Title</label>
                                                    <select class="form-control input-sm" name="beneficiaryTitle" ng-required="true" ng-model="newBeneficiary.title" ng-options="title for title in titleList">
                                                    </select>

                                                    <div class="error" ng-messages="beneficiaryForm.beneficiaryTitle.$error" ng-if="beneficiaryForm.beneficiaryTitle.$dirty">
                                                        <small ng-message="required">Please enter title.</small>
                                                    </div>
                                                </div>
                                                <div class="form-group required">
                                                    <label class="control-label">First Name</label>
                                                    <input type="text" class="form-control input-sm" ng-required="true" ng-pattern="/[a-zA-Z]/" ng-maxlength="20" name="beneficiaryFirstName" ng-model="newBeneficiary.firstName"/>

                                                    <div class="error" ng-messages="beneficiaryForm.beneficiaryFirstName.$error" ng-if="beneficiaryForm.beneficiaryFirstName.$dirty">
                                                        <small class="error" ng-message="required">Please enter First Name.</small>
                                                        <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                                        <small ng-message="pattern">Only alphabets are allowed.</small>
                                                    </div>

                                                    <p style="color:red" ng-show="isBeneficiaryTrusteeNameSame">
                                                        Beneficiary Name and Trustee Name Should Not be Same.
                                                    </p>

                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label">NRC</label>
                                                    <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" ng-maxlength="11" ng-pattern="/^[0-9]{6}\/[0-9]{2}\/[0-9]{1}$/" name="beneficiaryNrc" ng-model="newBeneficiary.nrc"/>

                                                    <div class="error" ng-messages="beneficiaryForm.beneficiaryNrc.$error" ng-if="beneficiaryForm.beneficiaryNrc.$dirty">
                                                       <small class="error" ng-message="required">Please enter NRC.</small>
                                                        <small ng-message="maxlength">Only 11 characters are allowed.</small>
                                                        <small ng-message="pattern"> Follow Pattern 999999/99/1</small>
                                                    </div>

                                                    <p style="color:red" ng-show="isBeneficiaryTrusteeNRCSame">
                                                        Beneficiary NRC and Trustee NRC Should Not be Same.
                                                    </p>

                                                </div>

                                                <div class="form-group required">
                                                    <label class="control-label required">Age</label>
                                                    <input type="number" class="form-control input-sm" name="beneficiaryAge1"  ng-model="newBeneficiary.age"
                                                           ng-required="true" ng-readonly="true"/>
                                                </div>

                                               <div class="form-group required">
                                                     <label class="control-label">Relationship To Life Assured</label>
                                                     <select class="form-control input-sm" name="relationship" ng-disabled="mode=='new'||mode=='view'" ng-required="true" ng-model="newBeneficiary.relationshipId" ng-options="applicableRelationship.relationCode as applicableRelationship.description for applicableRelationship in applicableRelationships">
                                                     </select>

                                                     <div class="error" ng-messages="beneficiaryForm.relationship.$error" ng-if="beneficiaryForm.relationship.$dirty">
                                                         <small class="error" ng-message="required">Please choose RelationshipId.</small>
                                                     </div>
                                                 </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group required">
                                                    <label class="control-label">Surname</label>
                                                    <input type="text" class="form-control input-sm" name="beneficiarySurname" ng-pattern="/[a-zA-Z]/" ng-required="true" ng-maxlength="20" ng-model="newBeneficiary.surname"/>

                                                    <div class="error" ng-messages="beneficiaryForm.beneficiarySurname.$error" ng-if="beneficiaryForm.beneficiarySurname.$dirty">
                                                        <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                                        <small ng-message="pattern">Only alphabets are allowed.</small>
                                                    </div>
                                                </div>
                                                <div class="form-group required">
                                                    <label class="control-label">Date Of Birth</label>
                                                    <div class='input-group date'>
                                                        <input type="text" class="form-control input-sm"
                                                               datepicker-popup="" view-enabled=""
                                                               ng-required="true"
                                                               is-open="launchdob4"
                                                               max-date="todayDate"
                                                               ng-model="newBeneficiary.dateOfBirth" name="dob" ng-disabled="mode=='new'||mode=='view'"
                                                               ng-change="showBeneficiaryDob(newBeneficiary.dateOfBirth)"/>
                                                            <span class="input-group-btn">
                                                            <button type="button" class="btn btn-default btn-sm"
                                                                    ng-disabled="mode=='new'||mode=='view'" ng-click="launchBeneficiaryDob($event)">
                                                                <i class="glyphicon glyphicon-calendar"></i></button>
                                                          </span>
                                                    </div>

                                                    <div class="error" ng-messages="beneficiaryForm.dob.$error" ng-if="beneficiaryForm.dob.$dirty">
                                                        <small ng-message="required">Please enter Beneficiary Date Of Birth.</small>
                                                        <small ng-message="date">Invalid Date.</small>
                                                    </div>
                                                </div>
                                                <div class="form-group required">
                                                    <label class="control-label">Sex</label>
                                                    <select type="text" class="form-control input-sm" name="sex" ng-model="newBeneficiary.gender" ng-required="true" ng-options="gender.code as gender.description for gender in genderList"></select>

                                                    <div class="error" ng-messages="beneficiaryForm.beneficiarySurname.$error" ng-if="beneficiaryForm.beneficiarySurname.$dirty">
                                                        <small class="error" ng-message="required">Please enter Sex.</small>
                                                    </div>

                                                </div>
                                                <div class="form-group required">
                                                    <label class="control-label">Share %</label>
                                                    <input type="number" class="form-control input-sm" name="share" ng-required="true" ng-model="newBeneficiary.share"/>

                                                    <div class="error" ng-messages="beneficiaryForm.share.$error" ng-if="beneficiaryForm.share.$dirty">
                                                        <small ng-message="required">Please enter share%.</small>
                                                    </div>
                                                </div>
                                                <div class="form-group required" ng-if="isShowTrusteeType">
                                                    <label class="control-label">Trustee Type</label>
                                                    <select class="form-control input-sm" name="trusteeType" ng-model="newBeneficiary.trusteeType" ng-disabled="mode=='new'||mode=='view'" ng-required="true">
                                                        <option  value="INDIVIDUAL">Individual</option>
                                                        <option  value="ORGANIZATION">Organization</option>
                                                    </select>
                                                    <div class="error" ng-messages="beneficiaryForm.trusteeType.$error" ng-if="beneficiaryForm.trusteeType.$dirty">
                                                        <small class="error" ng-message="required">Please provide TrusteeType Information.</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" ng-if="isShowTrusteeType" ng-form="planBeneficiary">
                                            <div class="panel panel-primary">
                                                <div class="panel-heading" >
                                                    <div class="row">
                                                        <div class="col-md-4">Trustee Information
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="panel-body ng-cloak">
                                                    <div class="row" ng-if="newBeneficiary.trusteeType == 'INDIVIDUAL' ">
                                                        <div class="col-md-6">
                                                            <div class="form-group required">
                                                                <label class="control-label">Title</label>
                                                                <select class="form-control input-sm" name="title" ng-required="true" ng-model="newBeneficiary.trusteeDetail.title" ng-disabled="mode=='new'||mode=='view'" ng-options="title as title for title in titleList">
                                                                </select>
                                                            </div>
                                                            <div class="form-group required">
                                                                <label class="control-label">Surname</label>
                                                                <input type="text" class="form-control input-sm" name="surname" ng-disabled="mode=='new'||mode=='view'" ng-pattern="/[a-zA-Z]/" ng-maxlength="14" ng-model="newBeneficiary.trusteeDetail.surname" ng-required="true"/>

                                                                <div class="error" ng-messages="planBeneficiary.surname.$error" ng-if="planBeneficiary.surname.$dirty">
                                                                    <small class="error" ng-message="required">Please enter Surname.</small>
                                                                    <small ng-message="maxlength">Only 14 characters are allowed.</small>
                                                                    <small ng-message="pattern">Only alphabets are allowed.</small>
                                                                </div>
                                                            </div>
                                                            <div class="form-group required">
                                                                <label class="control-label">Date Of Birth</label>
                                                                <div class='input-group date'>
                                                                    <input type="text" class="form-control input-sm"
                                                                           ng-click="launchTrusteeDobIl($event)" max-date="todayDate" datepicker-popup="dd/MM/yyyy"
                                                                           ng-model="newBeneficiary.trusteeDetail.dateOfBirth"
                                                                           datepicker-options="datePickerSettingsForUpdateILTrusteeDOB.dateOptions"
                                                                           is-open="datePickerSettingsForUpdateILTrusteeDOB.isOpened" close-text="Close"
                                                                           show-button-bar="false"
                                                                           name="trusteeDob" ng-required="true"
                                                                           ng-change="showTrusteeAge(newBeneficiary.trusteeDetail.dateOfBirth)"
                                                                           onkeypress="return isNumeric(event)"
                                                                           validate-date="" validate-update-dob="" />
                                                                        <span class="input-group-btn">
                                                                        <button ng-disabled="mode=='new'||mode=='view'" type="button" class="btn btn-default btn-sm"
                                                                                ng-click="launchTrusteeDobIl($event)">
                                                                            <i class="glyphicon glyphicon-calendar"></i></button>
                                                                        </span>
                                                                </div>
                                                                <p style="color:red" ng-show="isBeneficiaryTrusteeDOBSame">
                                                                    Trustee DOB and Beneficiary DOB Should Not be Same.
                                                                </p>
                                                            </div>
                                                            <div class="form-group required">
                                                                <label class="control-label">Mobile Number</label>
                                                                <input type="text" class="form-control input-sm" ng-required="true" ng-minlength="10" ng-disabled="mode=='new'||mode=='view'" maxlength="10" ng-maxLength="10" name="mobileNumber" ng-pattern="/^\d+$/" ng-model="newBeneficiary.trusteeDetail.mobileNumber"/>

                                                                <div class="error" ng-messages="planBeneficiary.mobileNumber.$error" ng-if="planBeneficiary.mobileNumber.$dirty">
                                                                    <small class="error" ng-message="required">Please enter Mobile Number</small>
                                                                    <small ng-message="pattern">Please enter a valid mobile number.</small>
                                                                    <small ng-message="maxlength">Only 10 number are allowed.</small>
                                                                    <small ng-message="minlength">Minimum 10 number are allowed.</small>
                                                                </div>
                                                            </div>
                                                            <div class="form-group required">
                                                                <label class="control-label">Address Line 1</label>
                                                                <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine1" ng-maxlength="100" ng-model="newBeneficiary.trusteeDetail.address1" ng-required="true"/>

                                                                <div class="error" ng-messages="planBeneficiary.addressLine1.$error" ng-if="planBeneficiary.addressLine1.$dirty">
                                                                    <small class="error" ng-message="required">Please enter Address Line 1</small>
                                                                    <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label class="control-label">Postal Code</label>
                                                                <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="postCode" ng-maxlength="7" ng-pattern="/^\d+$/" ng-model="newBeneficiary.trusteeDetail.postalCode"/>

                                                                <div class="error" ng-messages="planBeneficiary.postCode.$error">
                                                                    <small ng-message="maxlength">Only 7 characters are allowed.</small>
                                                                    <small ng-message="pattern">Only Numeric are allowed.</small>
                                                                </div>
                                                            </div>
                                                            <div class="form-group required">
                                                                <label class="control-label">Town</label>
                                                                <select class="form-control input-sm" name="town" ng-disabled="mode=='new'||mode=='view'" ng-required="true" ng-model="newBeneficiary.trusteeDetail.town"
                                                                        ng-options="city.geoId as city.geoName for city in trusteeCities"/>
                                                                <div class="error" ng-messages="planBeneficiary.town.$error" ng-if="planBeneficiary.town.$dirty">
                                                                    <small class="error" ng-message="required">Please enter Town</small>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-md-6">
                                                            <div class="form-group required">
                                                                <label class="control-label">First Name</label>
                                                                <input type="text" class="form-control input-sm" ng-disabled="mode=='new' || mode=='view'" name="firstName" ng-pattern="/[a-zA-Z]/" ng-maxlength="20" ng-model="newBeneficiary.trusteeDetail.firstName" ng-required="true"/>

                                                                <div class="error" ng-messages="planBeneficiary.firstName.$error" ng-if="planBeneficiary.firstName.$dirty">
                                                                    <small class="error" ng-message="required">
                                                                        Please enter FirstName
                                                                    </small>
                                                                    <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                                                    <small ng-message="pattern">Only alphabets are allowed.</small>
                                                                </div>
                                                                <p style="color:red" ng-show="isBeneficiaryTrusteeNameSame">
                                                                    Trustee Name and Beneficiary Name Should Not be Same.
                                                                </p>
                                                            </div>

                                                            <div class="form-group">
                                                                <label class="control-label">NRC</label>
                                                                <input type="text" class="form-control input-sm" name="nrc" ng-disabled="mode=='new'||mode=='view'" ng-model="newBeneficiary.trusteeDetail.nrc" ng-maxlength="11" ng-pattern="/^[0-9]{6}\/[0-9]{2}\/[0-9]{1}$/"/>

                                                                <div class="error" ng-messages="planBeneficiary.nrc.$error" ng-if="planBeneficiary.nrc.$dirty">
                                                                    <small class="error" ng-message="required">Please enter NRC.</small>
                                                                    <small ng-message="maxlength">Only 11 characters are allowed.</small>
                                                                    <small ng-message="pattern"> Follw Pattern 999999/99/1</small>
                                                                </div>

                                                                <p style="color:red" ng-show="isBeneficiaryTrusteeNRCSame">
                                                                    Trustee NRC and Beneficiary NRC Should Not be Same.
                                                                </p>
                                                            </div>

                                                            <div class="form-group required">
                                                                <label class="control-label required">Age</label>
                                                                <input type="text" class="form-control input-sm" name="beneficiaryAge1"  ng-model="newBeneficiary.trusteeDetail.age"
                                                                       ng-required="true" ng-readonly="true"/>

                                                                <p style="color:red" ng-hide="isTrusteeValid">
                                                                    Age of Trustee Should  18 year or more.
                                                                </p>

                                                            </div>

                                                            <div class="form-group">
                                                                <label class="control-label">Email ID</label>
                                                                <input type="email" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="email" ng-model="newBeneficiary.trusteeDetail.emailId" />

                                                                <div class="error" ng-messages="planBeneficiary.email.$error"  ng-if="planBeneficiary.email.$dirty">
                                                                    <small class="error" ng-message="required">Please enter  email address. </small>
                                                                    <small class="error" ng-message="email">Please enter  Valid email address. </small>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label class="control-label">Address Line 2</label>
                                                                <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine2" ng-maxlength="100" ng-model="newBeneficiary.trusteeDetail.address2"/>

                                                                <div class="error" ng-messages="planBeneficiary.addressLine2.$error" ng-if="planBeneficiary.addressLine2.$dirty">
                                                                    <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                                                </div>
                                                            </div>

                                                            <div class="form-group required">
                                                                <label class="control-label">Province</label>
                                                                <select class="form-control input-sm" name="province" ng-disabled="mode=='new'||mode=='view'" ng-options="province.provinceId as province.provinceName for province in provinces"
                                                                        ng-model="newBeneficiary.trusteeDetail.province" ng-required="true" ng-change="getTrusteeProvinceValue(newBeneficiary.trusteeDetail.province)" ng-init="getTrusteeProvinceValue(newBeneficiary.trusteeDetail.province)">
                                                                </select>

                                                                <div class="error" ng-messages="planBeneficiary.province.$error" ng-if="planBeneficiary.province.$dirty">
                                                                    <small class="error" ng-message="required">Please enter Province</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row" ng-if="newBeneficiary.trusteeType == 'ORGANIZATION' ">
                                                        <div class="col-md-6">
                                                            <div class="form-group required">
                                                                <label class="control-label">Name</label>
                                                                <input type="text" class="form-control input-sm" ng-disabled="mode=='new' || mode=='view'" name="name" ng-pattern="/[a-zA-Z]/" ng-maxlength="40" ng-model="beneficiary.trusteeDetail.organizationName" ng-required="true"/>

                                                                <div class="error" ng-messages="planBeneficiary.name.$error" ng-if="planBeneficiary.name.$dirty">
                                                                    <small class="error" ng-message="required">
                                                                        Organization Name
                                                                    </small>
                                                                    <small ng-message="maxlength">Only 40 characters are allowed.</small>
                                                                    <small ng-message="pattern">Only alphabets are allowed.</small>
                                                                </div>
                                                            </div>
                                                            <div class="form-group required">
                                                                <label class="control-label">Phone Number</label>
                                                                <input type="text" class="form-control input-sm" ng-required="true" ng-minlength="13" ng-disabled="mode=='new'||mode=='view'" maxlength="13" ng-maxLength="13" name="orgPhoneNumber" ng-pattern="/^\d+$/" ng-model="beneficiary.trusteeDetail.organizationPhoneNumber"/>

                                                                <div class="error" ng-messages="planBeneficiary.orgPhoneNumber.$error" ng-if="planBeneficiary.orgPhoneNumber.$dirty">
                                                                    <small class="error" ng-message="required">Please enter Mobile Number</small>
                                                                    <small ng-message="pattern">Please enter a valid mobile number.</small>
                                                                    <small ng-message="maxlength">Only 13 number are allowed.</small>
                                                                    <small ng-message="minlength">Minimum 13 number are allowed.</small>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label class="control-label">Address Line 2</label>
                                                                <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine2" ng-maxlength="100" ng-model="beneficiary.trusteeDetail.address2"/>

                                                                <div class="error" ng-messages="planBeneficiary.addressLine2.$error" ng-if="planBeneficiary.addressLine2.$dirty">
                                                                    <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                                                </div>
                                                            </div>

                                                            <div class="form-group required">
                                                                <label class="control-label">Province</label>
                                                                <select class="form-control input-sm" name="province" ng-disabled="mode=='new'||mode=='view'" ng-options="province.provinceId as province.provinceName for province in provinces"
                                                                        ng-model="beneficiary.trusteeDetail.province" ng-required="true" ng-change="getTrusteeProvinceValue(beneficiary.trusteeDetail.province)" ng-init="getTrusteeProvinceValue(beneficiary.trusteeDetail.province)">
                                                                </select>

                                                                <div class="error" ng-messages="planBeneficiary.province.$error" ng-if="planBeneficiary.province.$dirty">
                                                                    <small class="error" ng-message="required">Please enter Province</small>
                                                                </div>
                                                            </div>

                                                            <div class="form-group required">
                                                                <label class="control-label">Title</label>
                                                                <select class="form-control input-sm" name="title" ng-required="true" ng-model="beneficiary.trusteeDetail.title" ng-disabled="mode=='new'||mode=='view'" ng-options="title as title for title in titles">
                                                                </select>
                                                            </div>
                                                            <div class="form-group required">
                                                                <label class="control-label">Mobile Number</label>
                                                                <input type="text" class="form-control input-sm" ng-required="true" ng-minlength="10" ng-disabled="mode=='new'||mode=='view'" maxlength="10" ng-maxLength="10" name="mobileNumber" ng-pattern="/^\d+$/" ng-model="beneficiary.trusteeDetail.mobileNumber"/>

                                                                <div class="error" ng-messages="planBeneficiary.mobileNumber.$error" ng-if="planBeneficiary.mobileNumber.$dirty">
                                                                    <small class="error" ng-message="required">Please enter Mobile Number</small>
                                                                    <small ng-message="pattern">Please enter a valid mobile number.</small>
                                                                    <small ng-message="maxlength">Only 10 number are allowed.</small>
                                                                    <small ng-message="minlength">Minimum 10 number are allowed.</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label class="control-label">Email ID</label>
                                                                <input type="email" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="email" ng-model="beneficiary.trusteeDetail.emailId" />

                                                                <div class="error" ng-messages="planBeneficiary.email.$error"  ng-if="planBeneficiary.email.$dirty">
                                                                    <small class="error" ng-message="required">Please enter  email address. </small>
                                                                    <small class="error" ng-message="email">Please enter  Valid email address. </small>
                                                                </div>
                                                            </div>
                                                            <div class="form-group required">
                                                                <label class="control-label">Address Line 1</label>
                                                                <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine1" ng-maxlength="100" ng-model="beneficiary.trusteeDetail.address1" ng-required="true"/>

                                                                <div class="error" ng-messages="planBeneficiary.addressLine1.$error" ng-if="planBeneficiary.addressLine1.$dirty">
                                                                    <small class="error" ng-message="required">Please enter Address Line 1</small>
                                                                    <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label class="control-label">Postal Code</label>
                                                                <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="postCode" ng-maxlength="7" ng-pattern="/^\d+$/" ng-model="beneficiary.trusteeDetail.postalCode"/>

                                                                <div class="error" ng-messages="planBeneficiary.postCode.$error">
                                                                    <small ng-message="maxlength">Only 7 characters are allowed.</small>
                                                                    <small ng-message="pattern">Only Numeric are allowed.</small>
                                                                </div>
                                                            </div>
                                                            <div class="form-group required">
                                                                <label class="control-label">Town</label>
                                                                <select class="form-control input-sm" name="town" ng-disabled="mode=='new'||mode=='view'" ng-required="true" ng-model="beneficiary.trusteeDetail.town"
                                                                        ng-options="city.geoId as city.geoName for city in trusteeCities"/>

                                                                <div class="error" ng-messages="planBeneficiary.town.$error" ng-if="planBeneficiary.town.$dirty">
                                                                    <small class="error" ng-message="required">Please enter Town</small>
                                                                </div>
                                                            </div>

                                                            <div class="form-group required">
                                                                <label class="control-label">Contact Person Name</label>
                                                                <input type="text" class="form-control input-sm" ng-disabled="mode=='new' || mode=='view'" name="contactPersonName" ng-pattern="/[a-zA-Z]/" ng-maxlength="40" ng-model="beneficiary.trusteeDetail.contactPersonName" ng-required="true"/>

                                                                <div class="error" ng-messages="planBeneficiary.contactPersonName.$error" ng-if="planBeneficiary.contactPersonName.$dirty">
                                                                    <small class="error" ng-message="required">
                                                                        Please enter Contact person name.
                                                                    </small>
                                                                    <small ng-message="maxlength">Only 40 characters are allowed.</small>
                                                                    <small ng-message="pattern">Only alphabets are allowed.</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button class="btn btn-default" data-dismiss="modal" ng-hide="isUpdateBeneficiary" ng-disabled="beneficiaryForm.$invalid || isBeneficiaryTrusteeNameSame || isBeneficiaryTrusteeNRCSame || isBeneficiaryTrusteeDOBSame" ng-click="addBeneficiary(newBeneficiary)">Add</button>
                                        <button class="btn btn-default" data-dismiss="modal" ng-show="isUpdateBeneficiary" ng-disabled="beneficiaryForm.$invalid || isBeneficiaryTrusteeNameSame || isBeneficiaryTrusteeNRCSame || isBeneficiaryTrusteeDOBSame" ng-click="updateBeneficiaryToOriginalList(newBeneficiary)">Update</button>
                                        <button class="btn btn-default" data-dismiss="modal" ng-click="clearNewBeneficiary()">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    <div class="modal fade" id="agentModal" tabindex="-1" role="dialog" aria-labelledby="agentModal" ng-form="agentForm">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h3 class="modal-title">Agent Details</h3>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group required">
                                                <label class="control-label">Agent Code</label>
                                                <div class="input-group">
                                                    <input type="text" onkeypress="return isEnterKey(event)" class="form-control input-sm" name="agentId"
                                                           ng-blur="searchAgent()" ng-model="newAgent.agentId" ng-required="true"
                                                           ng-disabled="mode=='new'">
                                                    </input>
                                                    <div class="input-group-btn">
                                                        <button type="button" class="btn btn-default btn-sm" ng-click="searchAgent()"
                                                                ng-disabled="!newAgent.agentId || mode=='new'">
                                                            <span class="glyphicon glyphicon-search"></span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group required" ng-show="check">
                                                <span style="color:red">Invalid Agent Code</span>
                                            </div>

                                            <div class="form-group required">
                                                <label class="control-label">Commission %</label>
                                                <input class="form-control input-sm" type="number" max="100" min="0" name="commission" ng-model="newAgent.commission"/>
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="form-group required">
                                                <label class="control-label">First Name</label>
                                                <input type="text" class="form-control input-sm" name="firstName" readonly="true" ng-model="newAgent.firstName" />
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label">Last Name</label>
                                                <input type="text" class="form-control input-sm" name="surname" readonly="true" ng-model="newAgent.lastName" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-default" data-dismiss="modal" ng-disabled="agentForm.$invalid || checking" ng-click="addAgent(newAgent)">Add</button>
                                    <button class="btn btn-default" data-dismiss="modal" ng-click="cancel()">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-6">
                            <button type="button" class="btn btn-default btn-sm" ng-click="cancel()">Cancel</button>
                        </div>
                        <div class="col-sm-6">
                            <button type="button" style="float: right" ng-disabled="step1.$invalid || mode=='new'||mode=='view' || isEndrosementCreated" class="btn btn-default btn-sm" ng-click="createEndrosement()">Save</button>
                        </div>
                    </div>
                </div>

                <div class="step-pane" data-step="2">
                    <ng-form name="step2">
                        <accordion>
                            <accordion-group>
                                <accordion-heading>
                                    Mandatory Documents <i class="pull-right glyphicon"
                                                           ng-class="{'glyphicon-chevron-down': accordionStatusDocuments.documents,
                                                            'glyphicon-chevron-right': !accordionStatusDocuments.documents}"></i>
                                </accordion-heading>
                                <div class="bs-callout  bs-callout-info" style="overflow:auto;height:240px;">

                                    <p style="color:red" ng-hide="documentNameLengthTest()">
                                        File Name shouldn't exceed more than 100 character.
                                    </p>

                                    <div class="form-group "  ng-repeat="document in documentList" >
                                        <label class="col-sm-3 control-label">{{document.documentName}}</label>
                                        <div class="col-md-1"></div>
                                        <div class="input-group">
                                            <a  href="downloadmandatorydocument/{{document.gridFsDocId}}" style="display:inline;float:right;margin-top:10px;"  hg-show="!document.submitted">{{document.fileName}}</a>
                                            <button class="btn btn-default"
                                                    style="display:inline;float:right;margin-right:5px;" ng-file-select=""
                                                    ng-disabled="mode=='new'||mode=='view'" ng-model="document.documentAttached">Browse
                                            </button>
                                            <!--<label class="form-control input-sm" style="border:1px solid #ccc;width:380px;">{{document.documentAttached[0].name}} </label>-->
                                            <input class="form-control input-sm" style="width:300px;"
                                                    value="{{document.documentAttached[0].name}}"
                                                   readonly="true"/>
                                        </div>

                                    </div>
                                    <div class="btn btn-default" style="display:inline;float:right;clear:both"
                                         ng-disabled="mode=='new'||mode=='view' || !documentNameLengthTest()" ng-click="uploadDocumentFiles()">Upload All
                                    </div>
                                </div>
                            </accordion-group>

                            <accordion-group>
                                <accordion-heading>
                                    Additional Documents <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': accordionStatusDocuments.additionalDocuments, 'glyphicon-chevron-right': !accordionStatusDocuments.additionalDocuments}"></i>
                                </accordion-heading>
                                <div class="bs-callout  bs-callout-info" style="overflow:auto;height:250px;">

                                    <div class="row" >
                                        <button class="btn btn-default"
                                                style="display:inline;float:left;margin-right:5px;"
                                                ng-disabled="mode=='new'||mode=='view'" ng-click="addAdditionalDocument()">Add Document
                                        </button>
                                    </div>
                                    <br/><br/>

                                    <div class="row" >
                                        <div ng-repeat="additionalDocument in additionalDocumentList">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label class="control-label">Document Title</label>
                                                    <input type="text" class="form-control input-sm" style="width:400px;"
                                                           ng-disabled="mode=='new'||mode=='view'" name="documentTitle" ng-model="additionalDocument.documentId" />
                                                </div>
                                            </div>
                                            <div class="col-md-1">
                                            </div>
                                            <div class="col-md-5">
                                                <div class="form-group">
                                                    <label class="control-label">Browse File</label>
                                                    <button class="btn btn-default"
                                                            style="display:inline;float:right;margin-right:10px;margin-top:18px;" ng-file-select="callAdditionalDoc(additionalDocument.documentAttached)"
                                                            ng-disabled="mode=='new'||mode=='view'" ng-model="additionalDocument.documentAttached">Browse
                                                    </button>
                                                    <label class="form-control input-sm" style="border:1px solid #ccc;width:320px;">
                                                        {{additionalDocument.documentAttached[0].name}}
                                                    </label>
                                                    <a  href="downloadmandatorydocument/{{additionalDocument.gridFsDocId}}" style="display:inline;margin-top:0px;float:left;">{{additionalDocument.fileName}}</a>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <button class="btn btn-default" style="margin-top:20px;" ng-disabled="mode=='new'||mode=='view'" ng-click="removeAdditionalDocument($index)" >Remove</button>
                                                <!--<a  href="downloadmandatorydocument/{{additionalDocument.gridFsDocId}}" style="display:inline;margin-top:25px;float:right;">{{additionalDocument.fileName}}</a>-->
                                            </div>
                                        </div>
                                    </div>
                                    <button class="btn btn-default"
                                            style="display:inline;float:right;margin-right:5px;margin-top:20px;" ng-hide="mode=='new'||mode=='view'"  ng-disabled="!checkDocumentAttached || mode=='new'||mode=='view'" ng-click="uploadAdditionalDocument()">Upload
                                    </button>

                                </div>
                            </accordion-group>
                        </accordion>
                    </ng-form>
                    <div class="row">
                        <div class="col-sm-6">
                            <button type="button" class="btn btn-default btn-sm" ng-click="cancel()">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <form method="POST" action="createsearchendorsement" id="searchForm">
        <input type="hidden" id="searchFormProposal" name="endorsementId"/>
    </form>

    <style>

        .fuelux .checkbox-custom:before {
            font-family: "Glyphicons Halflings" !important;
            font-style: normal !important;
            font-weight: normal !important;
            font-variant: normal !important;
            text-transform: none !important;
            line-height: 1;
            speak: none;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            border: 1px solid #adadad;
            border-radius: 4px;
            color: #fff;
            content: " ";
            font-size: 12px;
            height: 18px;
            left: 0;
            padding: 1px 0 0 1px;
            position: absolute;
            top: 3px;
            width: 18px;
        }
        .btn {
            font-size: 12px;
        }
    </style>
</script>
<div class="ng-view container-fluid">

</div>


</body>
</html>