<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head th:include="fragments/common :: headTag">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title></title>
</head>
<body class="ng-cloak">
<div th:include="fragments/common :: bodyHeader" th:remove="tag"/>
<script>
    var isEnterKey = function (event){
        var charCode = (event.which) ? event.which : event.keyCode;

        if (charCode ==13) {
            event.preventDefault();
        }
    }

    requirejs.config({
        paths: {
            angucomplete: 'http://ghiden.github.io/angucomplete-alt/js/libs/angucomplete-alt',
            ilproposal_common: '/pla/js/proposal/individualLife/proposal.js?t=11221',
            ilproposal: '/pla/js/proposal/individualLife/createProposal.js?t=12121'
        },
        "shim": {"ilproposal": ["angular", "ilproposal_common", "angucomplete"]}
    });

    require(['ng-tags-input', 'checklistmodel', 'angular-ui-router'], function (a, b) {
    });

    requirejs(['main','angular-file-upload'], function () {
        require(['ilproposal', 'jquery'], function (app, $) {
            angular.bootstrap(document, ['createProposal']);
        });

    });

</script>

<div class="container fuelux" ng-controller="createProposalCtrl">
    <nth-alert></nth-alert>
    <form>
        <div class="wizard fuelux-wizard" selected-item="selectedWizard">
            <ul class="steps" style="margin-left: 0">
                <li data-step="1">
                    <span class="badge badge-info">A</span><span class="chevron"></span>
                </li>
                <li data-step="2">
                    <span class="badge badge-info">B</span><span class="chevron"></span>
                </li>
                <li data-step="3">
                    <span class="badge badge-info">C</span><span class="chevron"></span>
                </li>
                <li data-step="4">
                    <span class="badge badge-info">D</span><span class="chevron"></span>
                </li>
                <li data-step="5">
                    <span class="badge badge-info">E</span><span class="chevron"></span>
                </li>
                <li data-step="6">
                    <span class="badge badge-info">F</span><span class="chevron"></span>
                </li>
                <li data-step="7">
                    <span class="badge badge-info">G</span><span class="chevron"></span>
                </li>
                <li data-step="8">
                    <span class="badge badge-info">H</span><span class="chevron"></span>
                </li>
                <li data-step="9">
                    <span class="badge badge-info">I</span><span class="chevron"></span>
                </li>
                <li data-step="10">
                    <span class="badge badge-info">J</span><span class="chevron"></span>
                </li>
            </ul>

            <div class="actions">
                    <span style="font-weight: bolder;margin-right: 15px;color: #999">
                     Proposal Number :<span style="font-size: 13px;color: #3a87ad;">{{proposalNumberDetails.proposalNumber}}</span>
                     </span>
                <button type="button" class="btn btn-default btn-prev" disabled="disabled"><span class="glyphicon glyphicon-arrow-left"></span>Prev</button>
                <button type="button" class="btn btn-default btn-next">Next<span class="glyphicon glyphicon-arrow-right"></span></button>
            </div>
            <div class="step-content">
                <div class="step-pane" data-step="1">
                    <ng-include src="resources.proposerDetails | getTrustedUrl"></ng-include>
                </div>
                <div class="step-pane" data-step="2">
                    <ng-include src="resources.proposedAssuredUrl | getTrustedUrl"></ng-include>
                </div>
                <div class="step-pane" data-step="3">
                    <ng-include src="resources.planDetails | getTrustedUrl"></ng-include>
                </div>
                <div class="step-pane" data-step="4">
                    <ng-include src="resources.generalDetails | getTrustedUrl"></ng-include>
                </div>
                <div class="step-pane" data-step="5">
                    <ng-include src="resources.compulsoryHealthDetailsPart1 | getTrustedUrl"></ng-include>
                </div>
                <div class="step-pane" data-step="6">
                    <ng-include src="resources.compulsoryHealthDetailsPart2 | getTrustedUrl"></ng-include>
                </div>
                <div class="step-pane" data-step="7">
                    <ng-include src="resources.familyHabitAndBuild | getTrustedUrl"></ng-include>
                </div>
                <div class="step-pane" data-step="8">
                    <ng-include src="resources.additionalDetail | getTrustedUrl"></ng-include>
                </div>

                <div class="step-pane" data-step="9">
                    <ng-include src="resources.premiumDetail | getTrustedUrl"></ng-include>
                </div>

                <div class="step-pane" data-step="10">
                    <ng-include src="resources.mandatoryDocumentDetails | getTrustedUrl"></ng-include>
                </div>

            </div>
        </div>
    </form>
    <div class="modal fade" id="agentModal" tabindex="-1" role="dialog" aria-labelledby="agentModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Agent Details</h3>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <!--<div class="form-group required">
                                <label class="control-label">Agent Code</label>
                                <input type="text" class="form-control input-sm" name="surname" ng-model="agent.agentId"/>
                            </div>-->
                            <div class="form-group required">
                                <label class="control-label">Agent Code</label>
                                <div class="input-group">
                                    <input type="text" onkeypress="return isEnterKey(event)" class="form-control input-sm" name="agentId"
                                           ng-model="abc.agentId" ng-required="true" ng-change="clearAgentDetails()"
                                           ng-blur="searchAgent()"
                                           ng-disabled="mode=='new'">
                                    </input>
                                    <div class="input-group-btn">
                                        <button type="button" class="btn btn-default btn-sm" ng-click="searchAgent()"
                                                ng-disabled="!abc.agentId || mode=='new'">
                                            <span class="glyphicon glyphicon-search"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group required" ng-show="check">
                                <span style="color:red">Invalid Agent Code</span>
                            </div>

                            <div class="form-group required">
                                <label class="control-label">Commission %</label>
                                <input type="number" max="allowedPercentage" min="0" class="form-control input-sm" name="commission" ng-model="abc.commission"/>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group required">
                                <label class="control-label">First Name</label>
                                <input type="text" class="form-control input-sm" name="surname" readonly="true" ng-model="abc.firstName" />
                            </div>
                            <div class="form-group">
                                <label class="control-label">Last Name</label>
                                <input type="text" class="form-control input-sm" name="surname" readonly="true" ng-model="abc.lastName" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" data-dismiss="modal" ng-disabled="checking" ng-click="addAgent(abc)">Add</button>
                    <button class="btn btn-default" data-dismiss="modal" ng-click="cancel()">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="policyModal" tabindex="-1" role="dialog" aria-labelledby="policyModal" ng-form="PLANPLAL">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Policy Details</h3>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group required">
                                <label class="control-label">Policy Number</label>
                                <input type="number" name="policyNumber" class="form-control input-sm" ng-model="policy.policyOrProposalNumber" ng-maxLength="10" ng-required="true"/>

                                <div class="error" ng-messages="PLANPLAL.policyNumber.$error" ng-if="PLANPLAL.policyNumber.$dirty">
                                    <small class="error" ng-message="required">Please specify the Policy Number.</small>
                                    <small ng-message="maxlength">Only 13 number are allowed.</small>
                                </div>

                            </div>
                            <div class="form-group required">
                                <!--<label class="control-label">Sum Assured</label>-->
                                <label class="control-label">Amount of Insurance </label>
                                <input type="number" class="form-control input-sm" name="sumAssured" ng-model="policy.amount" ng-required="true" max="{{getMax()}}"/>

                                <div class="error" ng-messages="PLANPLAL.sumAssured.$error" ng-if="PLANPLAL.sumAssured.$dirty">
                                    <small class="error" ng-message="required">Please specify the Amount of Insurance for the existing policies with PLA.</small>
                                    <small ng-message="max">Upto 999999.99  are allowed.</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" ng-disabled="PLANPLAL.$invalid" ng-click="addPolicyDetails(policy)">Add</button>
                    <button class="btn btn-default" ng-click="cancelModal()">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="assuredByOthersModal" tabindex="-1" role="dialog" aria-labelledby="assuredByOthersModal" ng-form="otherInsurerPlan">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Assurer/Insurer Details</h3>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group required">
                                <label class="control-label">Name of Assurer/Insurer</label>
                                <input type="text" class="form-control input-sm" name="assuredName" ng-model="insurer1.name" ng-required="true" ng-maxlength="20" ng-pattern="/[a-zA-Z]/" />

                                <div class="error" ng-messages="otherInsurerPlan.assuredName.$error" ng-if="otherInsurerPlan.assuredName.$dirty">
                                    <small class="error" ng-message="required">Please specify the Name Of Assurer for the existing Policies.</small>
                                    <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                    <small ng-message="pattern">Only alphabets are allowed.</small>
                                </div>
                            </div>
                            <div class="form-group required">
                                <label class="control-label">Policy Number</label>
                                <input type="text" class="form-control input-sm" name="policyNumber" ng-model="insurer1.policyOrProposalNumber" ng-required="true" ng-maxlength="20"/>

                                <div class="error" ng-messages="otherInsurerPlan.policyNumber.$error" ng-if="otherInsurerPlan.policyNumber.$dirty">
                                    <small class="error" ng-message="required">Please specify the Policy Number.</small>
                                    <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                </div>

                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group required">
                                <label class="control-label">Amount of Insurance</label>
                                <input type="number" class="form-control input-sm" name="insuranceAmount" ng-model="insurer1.amount" ng-required="true" max="{{getMax()}}" />

                                <div class="error" ng-messages="otherInsurerPlan.insuranceAmount.$error" ng-if="otherInsurerPlan.insuranceAmount.$dirty">
                                    <small class="error" ng-message="required">Please specify the Amount of Insurance for the existing policies.</small>
                                    <small ng-message="max">Upto 999999.99  are allowed.</small>
                                </div>

                            </div>

                            <div class="form-group required">
                                <label class="control-label">Policy Inception Date</label>
                                <!--<input type="text" class="form-control input-sm" name="inceptionPolicyDate" ng-model="insurer1.date"/>-->
                                <div class='input-group date'>
                                    <input type="text" class="form-control input-sm"
                                           datepicker-popup="" view-enabled=""
                                           ng-required="true"
                                           is-open="launchinceptionDate"
                                           max-date="todayDate"
                                           ng-model="insurer1.date" name="policyInceptionDate" ng-disabled="mode=='new'||mode=='view'" ng-blur="showDob(proposedAssured.dateOfBirth)"/>
										<span class="input-group-btn">
										<button type="button" class="btn btn-default btn-sm"
                                                ng-disabled="mode=='new'||mode=='view'" ng-click="launchassuredByOthersDate($event)">
                                            <i class="glyphicon glyphicon-calendar"></i></button>
									  </span>
                                </div>

                                <div class="error" ng-messages="otherInsurerPlan.policyInceptionDate.$error" ng-if="otherInsurerPlan.policyInceptionDate.$dirty">
                                    <small ng-message="required">Please specify the Policy Inception Date for the existing Policies.</small>
                                    <small ng-message="date">Invalid Date.</small>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" ng-disabled="otherInsurerPlan.$invalid" ng-click="addAssuredByOthers(insurer1)">Add</button>
                    <button class="btn btn-default" ng-click="cancelModal()">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="pendingInsuranceByOthersTpl" tabindex="-1" role="dialog" aria-labelledby="pendingInsuranceByOthersTpl" ng-form="otherInsurersByOtherTplPlan">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Assurer/Insurer Details</h3>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group required">
                                <label class="control-label">Name of Assurer/Insurer</label>
                                <input type="text" class="form-control input-sm" name="assuredName" ng-model="insurer2.name" ng-required="true" ng-maxlength="20" ng-pattern="/[a-zA-Z]/" />

                                <div class="error" ng-messages="otherInsurersByOtherTplPlan.assuredName.$error" ng-if="otherInsurersByOtherTplPlan.assuredName.$dirty">
                                    <small class="error" ng-message="required">Please specify the Name Of Assurer/Insurer for the existing proposals.</small>
                                    <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                    <small ng-message="pattern">Only alphabets are allowed.</small>
                                </div>

                            </div>
                            <div class="form-group required">
                                <!-- <label class="control-label">Policy Number</label>-->
                                <label class="control-label">Proposal Number</label>
                                <input type="text" class="form-control input-sm" name="proposalNumber" ng-model="insurer2.policyOrProposalNumber" ng-required="true" ng-maxlength="20"/>

                                <div class="error" ng-messages="otherInsurersByOtherTplPlan.proposalNumber.$error" ng-if="otherInsurersByOtherTplPlan.proposalNumber.$dirty">
                                    <small class="error" ng-message="required">Please specify the Proposal Number.</small>
                                    <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                </div>

                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group required">
                                <label class="control-label">Amount of Insurance</label>
                                <input type="number" class="form-control input-sm" name="insuranceAmount" ng-model="insurer2.amount" ng-required="true" max="{{getMax()}}"/>

                                <div class="error" ng-messages="otherInsurersByOtherTplPlan.insuranceAmount.$error" ng-if="otherInsurersByOtherTplPlan.insuranceAmount.$dirty">
                                    <small class="error" ng-message="required">Please specify the Amount of Insurance for the existing policies.</small>
                                    <small ng-message="max">Upto 999999.99  are allowed.</small>
                                </div>

                            </div>
                            <div class="form-group required">
                                <label class="control-label">Date of Proposal</label>
                                <!-- <input type="text" class="form-control input-sm" name="proposalDate" ng-model="insurer2.date"/>-->

                                <div class='input-group date'>
                                    <input type="text" class="form-control input-sm"
                                           datepicker-popup="" view-enabled=""
                                           ng-required="true"
                                           is-open="pendingDate"
                                           max-date="todayDate"
                                           ng-model="insurer2.date" name="proposalDate" ng-disabled="mode=='new'||mode=='view'"/>
										<span class="input-group-btn">
										<button type="button" class="btn btn-default btn-sm"
                                                ng-disabled="mode=='new'||mode=='view'" ng-click="pendingInsuranceByOthersTplDate($event)">
                                            <i class="glyphicon glyphicon-calendar"></i></button>
									  </span>
                                </div>

                                <div class="error" ng-messages="otherInsurersByOtherTplPlan.proposalDate.$error" ng-if="otherInsurersByOtherTplPlan.proposalDate.$dirty">
                                    <small ng-message="required">Please specify the Policy Inception Date for the existing Policies.</small>
                                    <small ng-message="date">Invalid Date.</small>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" ng-disabled="otherInsurersByOtherTplPlan.$invalid" ng-click="addPendingInsuranceByOthersTpl(insurer2)">Add</button>
                    <button class="btn btn-default" ng-click="cancelModal()">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="assuranceDeclinedTpl" tabindex="-1" role="dialog" aria-labelledby="assuranceDeclinedTpl" ng-form="assuranceDeclinedTplPlan">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Assurer/Insurer Details</h3>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group required">
                                <label class="control-label">Name of Assurer/Insurer</label>
                                <input type="text" class="form-control input-sm" name="name" ng-model="insurer3.name" ng-required="true" ng-maxlength="20" ng-pattern="/[a-zA-Z]/"/>

                                <div class="error" ng-messages="assuranceDeclinedTplPlan.name.$error" ng-if="assuranceDeclinedTplPlan.name.$dirty">
                                    <small class="error" ng-message="required">Please specify the Name Of Assurer/Insurer for the existing proposals.</small>
                                    <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                    <small ng-message="pattern">Only alphabets are allowed.</small>
                                </div>

                            </div>
                            <div class="form-group required">
                                <label class="control-label">Proposal Number</label>
                                <input type="text" class="form-control input-sm" name="proposalNumber" ng-model="insurer3.policyOrProposalNumber" ng-required="true" ng-maxlength="20"/>

                                <div class="error" ng-messages="assuranceDeclinedTplPlan.proposalNumber.$error" ng-if="assuranceDeclinedTplPlan.proposalNumber.$dirty">
                                    <small class="error" ng-message="required">Please specify the Name Of Assurer/Insurer for the existing proposals.</small>
                                    <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" ng-disabled="assuranceDeclinedTplPlan.$invalid" ng-click="addaAssuranceDeclinedTpl(insurer3)">Add</button>
                    <button class="btn btn-default" ng-click="cancelModal()">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="beneficialModal" tabindex="-1" role="dialog" aria-labelledby="beneficialModal" ng-form="planBeneficiary">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Beneficiary Details</h3>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group required">
                                <label class="control-label">Title</label>
                                <select class="form-control input-sm" name="beneficiaryTitle" ng-required="true" ng-model="beneficiary.title" ng-options="title for title in titleList">
                                </select>

                                <div class="error" ng-messages="planBeneficiary.beneficiaryTitle.$error" ng-if="planBeneficiary.beneficiaryTitle.$dirty">
                                    <small ng-message="required">Please enter title.</small>
                                </div>
                            </div>
                            <div class="form-group required">
                                <label class="control-label">First Name</label>
                                <input type="text" class="form-control input-sm" ng-required="true" ng-pattern="/[a-zA-Z]/" ng-maxlength="20" name="beneficiaryFirstName" ng-model="beneficiary.firstName"/>

                                <div class="error" ng-messages="planBeneficiary.beneficiaryFirstName.$error" ng-if="planBeneficiary.beneficiaryFirstName.$dirty">
                                    <small class="error" ng-message="required">Please enter First Name.</small>
                                    <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                    <small ng-message="pattern">Only alphabets are allowed.</small>
                                </div>

                                <p style="color:red" ng-show="isBeneficiaryTrusteeNameSame">
                                    Beneficiary Name and Trustee Name Should Not Same.
                                </p>

                            </div>
                            <div class="form-group">
                                <label class="control-label">NRC</label>
                                <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" ng-maxlength="11" ng-pattern="/^[0-9]{6}\/[0-9]{2}\/[0-9]{1}$/" name="beneficiaryNrc" ng-model="beneficiary.nrc"/>

                                <div class="error" ng-messages="planBeneficiary.beneficiaryNrc.$error" ng-if="planBeneficiary.beneficiaryNrc.$dirty">
                                    <!--<small class="error" ng-message="required">Please enter NRC.</small>-->
                                    <small ng-message="maxlength">Only 11 characters are allowed.</small>
                                    <small ng-message="pattern"> Follow Pattern 999999/99/1</small>
                                </div>

                                <p style="color:red" ng-show="isBeneficiaryTrusteeNRCSame">
                                    Beneficiary NRC and Trustee NRC Should Not Same.
                                </p>

                            </div>

                            <div class="form-group required">
                                <label class="control-label required">Age</label>
                                <input type="number" class="form-control input-sm" name="beneficiaryAge1"  ng-model="beneficiary.age"
                                        ng-required="true" ng-readonly="true"/>
                            </div>

                            <div class="form-group required">
                                <label class="control-label">Relationship To Life Assured</label>
                                <!--<input type="text" class="form-control input-sm" name="relationship" ng-model="beneficiary.relationshipId"/>-->

                                <select class="form-control input-sm" name="relationship" ng-disabled="mode=='new'||mode=='view'" ng-required="true" ng-model="beneficiary.relationshipId" ng-options="applicableRelationship.relationCode as applicableRelationship.description for applicableRelationship in applicableRelationships">
                                </select>

                                <div class="error" ng-messages="planBeneficiary.relationship.$error" ng-if="planBeneficiary.relationship.$dirty">
                                    <small class="error" ng-message="required">Please choose RelationshipId.</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group required">
                                <label class="control-label">Surname</label>
                                <input type="text" class="form-control input-sm" name="beneficiarySurname" ng-pattern="/[a-zA-Z]/" ng-required="true" ng-maxlength="20" ng-model="beneficiary.surname"/>

                                <div class="error" ng-messages="planBeneficiary.beneficiarySurname.$error" ng-if="planBeneficiary.beneficiarySurname.$dirty">
                                    <!--<small class="error" ng-message="required">Please enter Surname.</small>-->
                                    <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                    <small ng-message="pattern">Only alphabets are allowed.</small>
                                </div>
                            </div>
                            <div class="form-group required">
                                <label class="control-label">Date Of Birth</label>
                                <!-- <input type="text" class="form-control input-sm" name="dob" ng-model="beneficiary.dob"/>-->
                                <div class='input-group date'>
                                    <input type="text" class="form-control input-sm"
                                           datepicker-popup="" view-enabled=""
                                           ng-required="true"
                                           is-open="launchdob4"
                                           max-date="todayDate"
                                           ng-model="beneficiary.dateOfBirth" name="dob" ng-disabled="mode=='new'||mode=='view'" ng-change="showBeneficiaryDob(beneficiary.dateOfBirth)"/>
                                    <span class="input-group-btn">
                                    <button type="button" class="btn btn-default btn-sm"
                                            ng-disabled="mode=='new'||mode=='view'" ng-click="launchBeneficiaryDob($event)">
                                        <i class="glyphicon glyphicon-calendar"></i></button>
                                  </span>
                                </div>

                                <div class="error" ng-messages="planBeneficiary.dob.$error" ng-if="planBeneficiary.dob.$dirty">
                                    <small ng-message="required">Please enter Beneficiary Date Of Birth.</small>
                                    <small ng-message="date">Invalid Date.</small>
                                </div>

                                <p style="color:red" ng-show="isBeneficiaryTrusteeDOBSame">
                                    Beneficiary DOB and Trustee DOB Should Not Same.
                                </p>
                            </div>
                            <div class="form-group required">
                                <label class="control-label">Sex</label>
                                <select type="text" class="form-control input-sm" name="sex" ng-model="beneficiary.gender" ng-required="true" ng-options="gender.code as gender.description for gender in genderList"></select>

                                <div class="error" ng-messages="planBeneficiary.beneficiarySurname.$error" ng-if="planBeneficiary.beneficiarySurname.$dirty">
                                    <small class="error" ng-message="required">Please enter Sex.</small>
                                </div>

                            </div>
                            <div class="form-group required">
                                <label class="control-label">Share %</label>
                                <!--<select type="text" class="form-control input-sm" name="share" ng-model="beneficiary.share">
                                    <option value="15">Select One</option>
                                </select>-->
                                <input type="number" class="form-control input-sm" name="share" ng-required="true" ng-model="beneficiary.share"/>

                                <div class="error" ng-messages="planBeneficiary.beneficiarySurname.$error" ng-if="planBeneficiary.beneficiarySurname.$dirty">
                                    <!--<small class="error" ng-message="required">Please enter Surname.</small>-->
                                    <small ng-message="required">Please enter share%.</small>
                                </div>
                            </div>

                            <div class="form-group required" ng-if="!addBeneficiaryStatusCheck">
                                <label class="control-label">Trustee Type</label>
                                <!--<select type="text" class="form-control input-sm" name="share" ng-model="beneficiary.share">
                                    <option value="15">Select One</option>
                                </select>-->

                                <select class="form-control input-sm" name="trusteeType" ng-model="beneficiary.trusteeType" ng-disabled="mode=='new'||mode=='view'" ng-required="true">
                                    <option  value="INDIVIDUAL">Individual</option>
                                    <option  value="ORGANIZATION">Organization</option>
                                </select>

                                <div class="error" ng-messages="planBeneficiary.trusteeType.$error" ng-if="planBeneficiary.trusteeType.$dirty">
                                    <small class="error" ng-message="required">Please provide TrusteeType Information.</small>
                                    <!--<small ng-message="required">Please enter share%.</small>-->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row" ng-if="!addBeneficiaryStatusCheck">
                        <div class="panel panel-primary">
                            <div class="panel-heading" >
                                <div class="row">
                                    <div class="col-md-4">Trustee Information
                                    </div>
                                </div>
                            </div>
                            <div class="panel-body ng-cloak">

                                <div class="row" ng-if="beneficiary.trusteeType == 'INDIVIDUAL' ">
                                    <div class="col-md-6">
                                        <div class="form-group required">
                                            <label class="control-label">Title</label>
                                            <select class="form-control input-sm" name="title" ng-required="true" ng-model="beneficiary.trusteeDetail.title" ng-disabled="mode=='new'||mode=='view'" ng-options="title as title for title in titles">
                                            </select>
                                        </div>
                                        <div class="form-group required">
                                            <label class="control-label">First Name</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new' || mode=='view'" name="firstName" ng-pattern="/[a-zA-Z]/" ng-maxlength="20" ng-model="beneficiary.trusteeDetail.firstName" ng-required="true"/>

                                            <div class="error" ng-messages="planBeneficiary.firstName.$error" ng-if="planBeneficiary.firstName.$dirty">
                                                <small class="error" ng-message="required">
                                                    Please enter FirstName
                                                </small>
                                                <small ng-message="maxlength">Only 20 characters are allowed.</small>
                                                <small ng-message="pattern">Only alphabets are allowed.</small>
                                            </div>
                                            <p style="color:red" ng-show="isBeneficiaryTrusteeNameSame">
                                                Trustee Name and Beneficiary Name Should Not Same.
                                            </p>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">NRC</label>
                                            <input type="text" class="form-control input-sm" name="nrc" ng-disabled="mode=='new'||mode=='view'" ng-model="beneficiary.trusteeDetail.nrc" ng-maxlength="11" ng-pattern="/^[0-9]{6}\/[0-9]{2}\/[0-9]{1}$/" ng-required="true"/>

                                            <div class="error" ng-messages="planBeneficiary.nrc.$error" ng-if="planBeneficiary.nrc.$dirty">
                                                <small class="error" ng-message="required">Please enter NRC.</small>
                                                <small ng-message="maxlength">Only 11 characters are allowed.</small>
                                                <small ng-message="pattern"> Follw Pattern 999999/99/1</small>
                                            </div>

                                            <p style="color:red" ng-show="isBeneficiaryTrusteeNRCSame">
                                                Trustee NRC and Beneficiary NRC Should Not Same.
                                            </p>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label">Email ID</label>
                                            <input type="email" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="email" ng-model="beneficiary.trusteeDetail.emailId" />

                                            <div class="error" ng-messages="planBeneficiary.email.$error"  ng-if="planBeneficiary.email.$dirty">
                                                <small class="error" ng-message="required">Please enter  email address. </small>
                                                <small class="error" ng-message="email">Please enter  Valid email address. </small>
                                            </div>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Address Line 1</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine1" ng-maxlength="100" ng-model="beneficiary.trusteeDetail.address1" ng-required="true"/>

                                            <div class="error" ng-messages="planBeneficiary.addressLine1.$error" ng-if="planBeneficiary.addressLine1.$dirty">
                                                <small class="error" ng-message="required">Please enter Address Line 1</small>
                                                <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Province</label>
                                            <select class="form-control input-sm" name="province" ng-disabled="mode=='new'||mode=='view'" ng-options="province.provinceId as province.provinceName for province in provinces"
                                                    ng-model="beneficiary.trusteeDetail.province" ng-required="true" ng-change="getTrusteeProvinceValue(beneficiary.trusteeDetail.province)" ng-init="getTrusteeProvinceValue(beneficiary.trusteeDetail.province)">
                                            </select>

                                            <div class="error" ng-messages="planBeneficiary.province.$error" ng-if="planBeneficiary.province.$dirty">
                                                <small class="error" ng-message="required">Please enter Province</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group required">
                                            <label class="control-label">Surname</label>
                                            <input type="text" class="form-control input-sm" name="surname" ng-disabled="mode=='new'||mode=='view'" ng-pattern="/[a-zA-Z]/" ng-maxlength="14" ng-model="beneficiary.trusteeDetail.surname" ng-required="true"/>

                                            <div class="error" ng-messages="planBeneficiary.surname.$error" ng-if="planBeneficiary.surname.$dirty">
                                                <small class="error" ng-message="required">Please enter Surname.</small>
                                                <small ng-message="maxlength">Only 14 characters are allowed.</small>
                                                <small ng-message="pattern">Only alphabets are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Mobile Number</label>
                                            <input type="text" class="form-control input-sm" ng-required="true" ng-minlength="10" ng-disabled="mode=='new'||mode=='view'" maxlength="10" ng-maxLength="10" name="mobileNumber" ng-pattern="/^\d+$/" ng-model="beneficiary.trusteeDetail.mobileNumber"/>

                                            <div class="error" ng-messages="planBeneficiary.mobileNumber.$error" ng-if="planBeneficiary.mobileNumber.$dirty">
                                                <small class="error" ng-message="required">Please enter Mobile Number</small>
                                                <small ng-message="pattern">Please enter a valid mobile number.</small>
                                                <small ng-message="maxlength">Only 10 number are allowed.</small>
                                                <small ng-message="minlength">Minimum 10 number are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label">Address Line 2</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine2" ng-maxlength="100" ng-model="beneficiary.trusteeDetail.address2"/>

                                            <div class="error" ng-messages="planBeneficiary.addressLine2.$error" ng-if="planBeneficiary.addressLine2.$dirty">
                                                <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label">Postal Code</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="postCode" ng-maxlength="7" ng-pattern="/^\d+$/" ng-model="beneficiary.trusteeDetail.postalCode"/>

                                            <div class="error" ng-messages="planBeneficiary.postCode.$error">
                                                <small ng-message="maxlength">Only 7 characters are allowed.</small>
                                                <small ng-message="pattern">Only Numeric are allowed.</small>
                                            </div>
                                        </div>
                                        <div class="form-group required">
                                            <label class="control-label">Town</label>
                                            <select class="form-control input-sm" name="town" ng-disabled="mode=='new'||mode=='view'" ng-required="true" ng-model="beneficiary.trusteeDetail.town"
                                                    ng-options="city.geoId as city.geoName for city in trusteeCities"/>
                                            <div class="error" ng-messages="planBeneficiary.town.$error" ng-if="planBeneficiary.town.$dirty">
                                                <small class="error" ng-message="required">Please enter Town</small>
                                            </div>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Date Of Birth</label>
                                            <!--<input type="text" class="form-control input-sm" name="dob" ng-model="proposer.dateOfBirth" ng-required="true"/>-->
                                            <div class='input-group date'>
                                                <input type="text" class="form-control input-sm"
                                                       datepicker-popup="" view-enabled=""
                                                       ng-required="true"
                                                       is-open="trusteeDobLaunch"
                                                       max-date="todayDate" ng-disabled="mode=='new'||mode=='view'"
                                                       ng-model="beneficiary.trusteeDetail.dateOfBirth" name="trusteeDob"
                                                        ng-change="showTrusteeAge(beneficiary.trusteeDetail.dateOfBirth)"/>
                                                    <span class="input-group-btn">
                                                    <button ng-disabled="mode=='new'||mode=='view'" type="button" class="btn btn-default btn-sm"
                                                            ng-click="launchTrusteeDob($event)">
                                                        <i class="glyphicon glyphicon-calendar"></i></button>
                                                  </span>
                                            </div>
                                            <p style="color:red" ng-show="isBeneficiaryTrusteeDOBSame">
                                                Trustee DOB and Beneficiary DOB Should Not Same.
                                            </p>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label required">Age</label>
                                            <input type="text" class="form-control input-sm" name="beneficiaryAge1"  ng-model="beneficiary.trusteeDetail.age"
                                                   ng-required="true" ng-readonly="true"/>

                                            <p style="color:red" ng-hide="isTrusteeValid">
                                               Age of Trustee Should  18 year or more.
                                            </p>

                                        </div>

                                    </div>
                                </div>

                                <div class="row" ng-if="beneficiary.trusteeType == 'ORGANIZATION' ">
                                    <div class="col-md-6">
                                        <div class="form-group required">
                                            <label class="control-label">Title</label>
                                            <select class="form-control input-sm" name="title" ng-required="true" ng-model="beneficiary.trusteeDetail.title" ng-disabled="mode=='new'||mode=='view'" ng-options="title as title for title in titles">
                                            </select>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Name</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new' || mode=='view'" name="name" ng-pattern="/[a-zA-Z]/" ng-maxlength="40" ng-model="beneficiary.trusteeDetail.organizationName" ng-required="true"/>

                                            <div class="error" ng-messages="planBeneficiary.name.$error" ng-if="planBeneficiary.name.$dirty">
                                                <small class="error" ng-message="required">
                                                    Organization Name
                                                </small>
                                                <small ng-message="maxlength">Only 40 characters are allowed.</small>
                                                <small ng-message="pattern">Only alphabets are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label">Email ID</label>
                                            <input type="email" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="email" ng-model="beneficiary.trusteeDetail.emailId" />

                                            <div class="error" ng-messages="planBeneficiary.email.$error"  ng-if="planBeneficiary.email.$dirty">
                                                <small class="error" ng-message="required">Please enter  email address. </small>
                                                <small class="error" ng-message="email">Please enter  Valid email address. </small>
                                            </div>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Address Line 1</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine1" ng-maxlength="100" ng-model="beneficiary.trusteeDetail.address1" ng-required="true"/>

                                            <div class="error" ng-messages="planBeneficiary.addressLine1.$error" ng-if="planBeneficiary.addressLine1.$dirty">
                                                <small class="error" ng-message="required">Please enter Address Line 1</small>
                                                <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label">Postal Code</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="postCode" ng-maxlength="7" ng-pattern="/^\d+$/" ng-model="beneficiary.trusteeDetail.postalCode"/>

                                            <div class="error" ng-messages="planBeneficiary.postCode.$error">
                                                <small ng-message="maxlength">Only 7 characters are allowed.</small>
                                                <small ng-message="pattern">Only Numeric are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Town</label>
                                            <select class="form-control input-sm" name="town" ng-disabled="mode=='new'||mode=='view'" ng-required="true" ng-model="beneficiary.trusteeDetail.town"
                                                    ng-options="city.geoId as city.geoName for city in trusteeCities"/>

                                            <div class="error" ng-messages="planBeneficiary.town.$error" ng-if="planBeneficiary.town.$dirty">
                                                <small class="error" ng-message="required">Please enter Town</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">

                                        <div class="form-group required">
                                            <label class="control-label">Contact Person Name</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new' || mode=='view'" name="contactPersonName" ng-pattern="/[a-zA-Z]/" ng-maxlength="40" ng-model="beneficiary.trusteeDetail.contactPersonName" ng-required="true"/>

                                            <div class="error" ng-messages="planBeneficiary.contactPersonName.$error" ng-if="planBeneficiary.contactPersonName.$dirty">
                                                <small class="error" ng-message="required">
                                                    Please enter Contact person name.
                                                </small>
                                                <small ng-message="maxlength">Only 40 characters are allowed.</small>
                                                <small ng-message="pattern">Only alphabets are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Phone Number</label>
                                            <input type="text" class="form-control input-sm" ng-required="true" ng-minlength="13" ng-disabled="mode=='new'||mode=='view'" maxlength="13" ng-maxLength="13" name="orgPhoneNumber" ng-pattern="/^\d+$/" ng-model="beneficiary.trusteeDetail.organizationPhoneNumber"/>

                                            <div class="error" ng-messages="planBeneficiary.orgPhoneNumber.$error" ng-if="planBeneficiary.orgPhoneNumber.$dirty">
                                                <small class="error" ng-message="required">Please enter Mobile Number</small>
                                                <small ng-message="pattern">Please enter a valid mobile number.</small>
                                                <small ng-message="maxlength">Only 13 number are allowed.</small>
                                                <small ng-message="minlength">Minimum 13 number are allowed.</small>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label">Address Line 2</label>
                                            <input type="text" class="form-control input-sm" ng-disabled="mode=='new'||mode=='view'" name="addressLine2" ng-maxlength="100" ng-model="beneficiary.trusteeDetail.address2"/>

                                            <div class="error" ng-messages="planBeneficiary.addressLine2.$error" ng-if="planBeneficiary.addressLine2.$dirty">
                                                <small ng-message="maxlength">Only 100 characters are allowed.</small>
                                            </div>
                                        </div>
                                        <div class="form-group required">
                                            <label class="control-label">Province</label>
                                            <select class="form-control input-sm" name="province" ng-disabled="mode=='new'||mode=='view'" ng-options="province.provinceId as province.provinceName for province in provinces"
                                                    ng-model="beneficiary.trusteeDetail.province" ng-required="true" ng-change="getTrusteeProvinceValue(beneficiary.trusteeDetail.province)" ng-init="getTrusteeProvinceValue(beneficiary.trusteeDetail.province)">
                                            </select>

                                            <div class="error" ng-messages="planBeneficiary.province.$error" ng-if="planBeneficiary.province.$dirty">
                                                <small class="error" ng-message="required">Please enter Province</small>
                                            </div>
                                        </div>

                                        <div class="form-group required">
                                            <label class="control-label">Mobile Number</label>
                                            <input type="text" class="form-control input-sm" ng-required="true" ng-minlength="10" ng-disabled="mode=='new'||mode=='view'" maxlength="10" ng-maxLength="10" name="mobileNumber" ng-pattern="/^\d+$/" ng-model="beneficiary.trusteeDetail.mobileNumber"/>

                                            <div class="error" ng-messages="planBeneficiary.mobileNumber.$error" ng-if="planBeneficiary.mobileNumber.$dirty">
                                                <small class="error" ng-message="required">Please enter Mobile Number</small>
                                                <small ng-message="pattern">Please enter a valid mobile number.</small>
                                                <small ng-message="maxlength">Only 10 number are allowed.</small>
                                                <small ng-message="minlength">Minimum 10 number are allowed.</small>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <!--{{isBeneficiaryTrusteeNameSame}}-->
                    <!--<button class="btn btn-default" data-dismiss="modal" ng-disabled="planBeneficiary.$invalid || addBeneficiaryStatusCheck" ng-click="addBeneficiary(beneficiary)">Add</button>-->
                    <button class="btn btn-default" data-dismiss="modal" ng-disabled="planBeneficiary.$invalid || !isTrusteeValid || isBeneficiaryTrusteeNameSame || isBeneficiaryTrusteeNRCSame || isBeneficiaryTrusteeDOBSame" ng-click="addBeneficiary(beneficiary)">Add</button>
                    <!--<button class="btn btn-default" data-dismiss="modal" ng-click="addBeneficiary(beneficiary)">Add12</button>-->
                    <button class="btn btn-default" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</div>
<footer class="footer" th:include="fragments/common :: footer"></footer>
</body>
</html>
